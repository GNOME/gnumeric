2003-05-13  Morten Welinder  <terra@gnome.org>

	* widget-charmap-selector.c (cs_init): Filter out unsupported
	encodings.

2003-05-13  Jody Goldberg <jody@gnome.org>

	* widget-charmap-selector.c (cs_class_init) : support being a mnemonic
	  target.  Remove pointless destroy method.
	(cs_mnemonic_activate) : new.

2003-05-12  Morten Welinder  <terra@gnome.org>

	* gnumeric-optionmenu.c (connect_menu_signals): Plug leak.

2003-05-11  Jody Goldberg <jody@gnome.org>

	* Release 1.1.17

2003-05-09  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-optionmenu.c (option_menu_init): initialize 
	  last_signaled_menu_item
	(gnumeric_option_menu_changed): check and uncheck items
	(gnumeric_option_menu_show_all): show more
	* gnumeric-optionmenu.h (last_signaled_menu_item): new
	  field in teh option menu
	* widget-charmap-selector.c: use check_menu_item rather 
	  than just menu_item

2003-05-08  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* Makefile.am: added src/widgets/gnumeric-optionmenu.[ch]
	* gnumeric-optionmenu.c: new (based on gtkoptionmenu)
	* gnumeric-optionmenu.h: new (based on gtkoptionmenu)
	* widget-charmap-selector.c: rewritten

2003-05-05  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* widget-charmap-selector.c: new (objectified charset.c)
	* widget-charmap-selector.h: new (objectified charset.h)
	* Makefile.am: added widget-charmap-selector.[ch]

2003-04-23  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gee_class_init) : add wbcg property.
	(gee_set_property) : ditto.
	(gee_get_property) : ditto.
	(gnm_expr_entry_set_scg) : don't clear the wbcg.

2003-04-23  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (cb_entry_activate) : patch warning.

2003-04-22  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (cb_entry_activate) : queue an update.
	(gnm_expr_entry_signal_update) : queue the updates in an idle handler
	  so that we can get some rudimentary motion compression for keyboard
	  edits.

2003-04-22  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c : Tidy up the namespacing.
	(gnm_expr_entry_new) : use the scg property which seems like a better
	  match than wbcg, but continue to take a wbcg to keep life simple.
	(gnm_expr_entry_thaw) : actually implement the update policies
	  partially.  Things are still broken for direct edits.  Mouse based
	  selection should work smoothly.

2003-04-22  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_thaw) : cheesy hack to only
	  send an update at the end of a drag, not during.  This actually
	  implements part of the update_policy stuff.  Not complete enough to
	  trust though.  It only works in the context of dragging, not
	  editing.

2003-04-22  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c : make with_icon, and wbcg parameters and move
	  the majority of _new into _init.  Then add gee_mnemonic_activate and
	  link it to GtkWidget inclass_init so that entries can be selected
	  via mnemonics in labels.

2003-03-18  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_thaw) : send an update signal
	  when thawing

2003-01-28  Jody Goldberg <jody@gnome.org>

	* Release 1.1.16

2003-01-03  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_set_flags): Make docs
	reflect current reality.
	(gnm_expr_entry_parse): Use the same bogus domain to g_error_new
	as the parser does.

2002-12-31  Jody Goldberg <jody@gnome.org>

	* Release 1.1.15

2002-12-22  Jody Goldberg <jody@gnome.org>

	* Release 1.1.14

2002-12-22  Jody Goldberg <jody@gnome.org>

	* Release 1.1.13

2002-12-21  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_load_from_range) : loading a
	  range into the entry ensures that it is valid.

2002-12-09  Jon K Hellan  <hellan@acm.org>

	* widget-editable-label.c (el_set_color_gdk): Remove.
	(el_set_style_entry): New. Set style to GtkEntry appearance.
	(el_set_style_label): New. Set style to GtkLabel appearance.
	(el_stop_editing): Use el_set_style_label.
	(cb_el_parent_set): Remove.
	(el_init): Don't connect cb_el_parent_set.
	(editable_label_set_color): Use el_set_style_label.
	(editable_label_new): Don't call el_set_color_gdk.
	(editable_label_start_editing): Replace el_set_color_gdk with
	el_set_style_entry.

2002-11-15  Jody Goldberg <jody@gnome.org>

	* Release 1.1.12

2002-11-15  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (el_set_cursor) : new.
	(el_stop_editing) : use it here.
	(el_entry_realize) : here.
	(editable_label_start_editing) : and here.
	(el_class_init) : connect up the new realize handler.

2002-11-13  Jody Goldberg <jody@gnome.org>

	* widget-font-selector.c (fs_init) : explicitly show the preview.

2002-11-03  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* widget-editable-label.c, widget-font-selector.c,
	  gnumeric-cell-renderer-expr-entry.c,
	  gnumeric-cell-renderer-toggle.c, gnumeric-expr-entry.c,
	  gnumeric-combo-text.c: Annotated unused parameters.

2002-11-01  Jody Goldberg <jody@gnome.org>

	* Release 1.1.11

2002-11-01  Jody Goldberg <jody@gnome.org>

	* widget-font-selector.c (fs_init) : don't hard code the path to the
	  glade file.

2002-10-31  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_expr_find_range) : doh!

2002-10-30  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=97091
	* gnumeric-expr-entry.c (cb_gee_key_press_event) : position cursor
	  correctly.

2002-10-27  Jody Goldberg <jody@gnome.org>

	* Release 1.1.10

2002-10-27  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (cb_gee_key_press_event) : do another
	  sheet_update after moving the cursor.  The cmd associated with
	  editing the edit did an update, but the cursor had not moved yet
	  so the editline could get out of sync.

2002-10-27  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start) : rangerefs
	  can only start at the transition between alphanumerics and symbols.
	  Hence ABCDE3 cannot have a valid ref of DE3

2002-10-18  Morten Welinder  <terra@diku.dk>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start): Use
	g_unichar_isalnum.

2002-10-05  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start) : expressions
	  need not start with header characters.

2002-09-30  Jody Goldberg <jody@gnome.org>

	* Release 1.1.9

2002-09-23  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_get_rangesel) : fix silliness.

2002-09-19  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_get_rangesel) : normalize the
	  result range.

2002-09-13  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start) : accept
	  ranges that start or end at the cursor.

2002-09-06  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c : convert to using RangeRef and rangeref_parse
	  and rangeref_as_string.

2002-08-25  Jody Goldberg <jody@gnome.org>

	* Release 1.1.8

2002-08-12  Jody Goldberg <jody@gnome.org>

	* Release 1.1.7

2002-08-04  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (cb_gee_key_press_event) : move the cursor as
	  expected when Enter is pressed while editing.

2002-08-04  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (cb_gee_key_press_event) : fix handling of
	  embedded newlines and remove use of deprecated call.

2002-07-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.6

2002-07-17  Morten Welinder  <terra@diku.dk>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start): Reorder
	things so we don't access memory before the string.

2002-06-20  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (cb_gee_key_press_event) : We are already
	  operating on the selection in the sheet view, why pretent to be
	  generic by passing a ParsePos.  Just pass the view.

2002-06-15 Andreas J. Guelzow <aguelzow@taliesin.ca>

	http://bugzilla.gnome.org/show_bug.cgi?id=85383
	* widget-editable-label.c (cb_el_parent_set) : new
	(el_init) : add signal connection
	(editable_label_set_color) : update flags and always store new
	  colors

2002-05-29  Jody Goldberg <jody@gnome.org>

	* Release 1.1.4

2002-05-29  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_new) : do not initialize
	  this to single range.
	(gnm_expr_entry_parse) : fill in the parse error if it is supplied.

2002-05-21 Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-cell-renderer-expr-entry.c 
	(gnumeric_cell_renderer_expr_entry_editing_done) : make non-static
	(gnumeric_cell_renderer_expr_entry_start_editing) : save entry
	* gnumeric-cell-renderer-expr-entry.h : declare
	  gnumeric_cell_renderer_expr_entry_editing_done

2002-05-03 Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnm_expr_entry_can_rangesel) : Don't allow range 
	  selections when a guru is up but no expression entry active.

2002-05-03 Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnumeric_cell_editable_entry_activated) : don't remove
	  widget twice.

2002-04-29  Jody Goldberg <jody@gnome.org>

	* Release 1.1.3

2002-04-21  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* Makefile.am: Added `-I..' to INCLUDES so gnm-marshalers.h is found
	when building in a separate builddir.

2002-04-15  Morten Welinder  <terra@diku.dk>

	* *.c: Include <gnumeric-config.h> as needed.

2002-04-12  Morten Welinder  <terra@diku.dk>

	* gnumeric-cell-renderer-text.c
	(gnumeric_cell_renderer_text_get_type): Fix instance size.
	* gnumeric-cell-renderer-expr-entry.c
	(gnumeric_cell_renderer_expr_entry_get_type): Ditto.

2002-04-09  Morten Welinder  <terra@diku.dk>

	* gnumeric-expr-entry.c (cb_entry_changed): Quiet.

2002-04-08  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-cell-renderer-toggle.[ch] : new, essentially
	  gnumeric-cell-renderer.[ch] rewritten as a subclass
	* gnumeric-cell-renderer.[ch] : deleted
	* Makefile.am : replace gnumeric-cell-renderer.[ch] by
	   gnumeric-cell-renderer-toggle.[ch]

2002-04-05  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start) : set
	  rangesel::is_valid even for empty text
	(gee_init) : initialize rangesel::scg
	(cb_gee_button_press_event) : new
	(cb_gee_key_press_event) : move some code into cb_entry_changed
	(cb_entry_changed) : also handle key press induced changes

2002-04-05  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c : add rangesel::is_valid
	(gee_init) : initialize rangesel::is_valid
	(gee_rangesel_reset) : set rangesel::is_valid
	(gnm_expr_entry_rangesel_start) : set rangesel::is_valid and 
	  rangesel::sheet
	(cb_gee_key_press_event) : ignore single shift and alt keys
	(gnm_expr_entry_get_rangesel) : return a 
	  boolean indicating whether the range selection is valid.
	(gnm_expr_entry_can_rangesel) : use rangesel::is_valid
	* gnumeric-expr-entry.h (gnm_expr_entry_get_rangesel) : return a 
	  boolean indicating whether the range selection is valid.

2002-04-04  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start) extract
	  parsing into src/parse-util.c 

2002-04-02  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-cell-renderer-expr-entry.[ch] : make this widget a subclass
	  of gnumeric-cell-renderer-text rather than 
	  gtkcellrenderertext.
	* gnumeric-cell-renderer-text.c : mark editable fields with a frame to
	  make them more visible.

2002-04-02  Andreas J. Guelzow <aguelzow@taliesin.ca>

	*  gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start): A
	second cut at UTF-8 (or a first cut at the second half of this 
	function)

2002-04-02  Morten Welinder  <terra@diku.dk>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start): A good
	first cut at UTF-8.  Also speed up a lot by avoiding excessive
	numbers of parsing calls.

2002-03-25  Jody Goldberg <jody@gnome.org>

	* Release 1.1.2

2002-03-25  Morten Welinder  <terra@diku.dk>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start): Set the
	range.  (Fixes #76187.)

2002-03-23  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (cell_editable_key_press_event) : delete
	(gee_key_press_event) : rename cb_gee_key_press_event and add
	  handling of keypresses for cell-editable
	(gnumeric_expr_entry_new) : connect cb_gee_key_press_event to
	  signal

2002-03-21  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-cell-renderer-expr-entry.[ch] : new cell renderer using 
	  the expresion entry widget
	* src/widgets/gnumeric-expr-entry.[ch] : implement GtkCellEditables 
	  interface
	* Makefile.am : add gnumeric-cell-renderer-expr-entry.[ch]

2002-03-17  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (editable_label_set_color) : fix sense of
	test.

2002-03-15  Morten Welinder  <terra@diku.dk>

	* gnumeric-cell-renderer-text.c: Repair the sea-sick white space.

2002-03-17  Jody Goldberg <jody@gnome.org>

	* gnumeric-combo-text.c (cb_scroll_size_request) : if nothing is
	  selected fall back on the list size req.  This is not correct,
	  but it will do for now.

2002-03-15  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (editable_label_set_color) : permit colour
	  changes while editing, and comment the routine.
	(el_entry_activate) : always call edit_finished.

2002-03-15  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* widget-editable-label.[ch] (el_start_editing) : renamed to 
	  editable_label_start_editing and made non-static
	(editable_label_set_color) : added third argument
	(editable_label_new) : ditto

2002-03-14  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-cell-renderer-text.[ch] : new renderer to make
	  sure not to obscure colored backgrounds on selection
	* Makefile.am : added gnumeric-cell-renderer-text.[ch] 

2002-03-12  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c : rewrite.

2002-03-10  Jody Goldberg <jody@gnome.org>

	* Release 1.1.1

2002-03-09  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* Makefile.am : add gnumeric-cell-renderer.[ch]
	* gnumeric-cell-renderer.[ch] : new

2002-03-02  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_get_text) : new util.
	(gnm_expr_entry_parse_as_value) :  add some preconditions.
	(gnm_expr_entry_parse_as_list) : ditto.
	(gnm_expr_entry_is_cell_ref) :  ditto.
	(gnm_expr_entry_global_range_name) : ditto.
	(gnm_expr_entry_grab_focus) : ditto.

2002-02-28  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnm_expr_entry_is_blank) : implement. Was 
	  listed in gnumeric-expr-entry.h but did not exist

2002-02-28  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_rangesel_start) : Init to the
	  selected flags even if there is no text.

2002-02-27  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.h (gnm_expr_entry_grab_focus) : new
	* gnumeric-expr-entry.c (gnm_expr_entry_grab_focus) : new

2002-02-27  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnm_expr_entry_is_cell_ref) : new (is_cell_ref
	  from src/dialogs/dialog-solver.c and 
	  src/dialogs/dialog-consolidate.c)
	(gnm_expr_entry_global_range_name) : new (extracted common code)
	* gnumeric-expr-entry.h (gnm_expr_entry_is_cell_ref) : new
	(gnm_expr_entry_global_range_name) : new

2002-02-26  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (el_size_request) : start using pango to
	  size things.  Still lots of breakage.

2002-02-25  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gee_focus_in_event, gee_focus_out_event) :
	  deleted
	(gnumeric_expr_entry_new) remove ref to gee_focus_*_event

2002-02-23  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_button_press_event) :
	  rename gee_notify_cursor_position and change to signal handler
	(gee_class_init) : remove ref to gnumeric_expr_entry_button_press_event
	(gnumeric_expr_entry_new) : connect to notify::cursor-position
	  signal

2002-02-23  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gee_focus_in_event, gee_focus_out_event) :
	  wbcg_set_entry doesn't work here, disabled
	* gnumeric-expr-entry.h (gnumeric_expr_entry_set_update_policy) : 
	  since this is non-static, declare it

2002-02-21  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnm_expr_entry_load_from_expr) : add new
	  convenience routine.

2002-02-21  Morten Welinder  <terra@diku.dk>

	* widget-font-selector.c (styles): Constify.

2002-02-18  Jody Goldberg <jody@gnome.org>

	* Release 1.1.0

2002-02-09  Jody Goldberg <jody@gnome.org>

	* src/widgets/gnumeric-combo-text.c (gnm_signal_emit) : new utility to
	  hand wrap g_signal_emitv.  We are forced to use it to avoid having the
	  result value we assign as default initialized to FALSE by
	  gtk_signal_emit.
	(cb_entry_activate) : use gnm_signal_emit.
	(cb_list_select) : ditto.
	(gnm_combo_text_init) : renamed from gnm_combo_text_construct.
	(gnm_combo_text_destroy) : use g_type_class_peek.
	(gnm_combo_text_class_init) : convert to g_signal.
	(gnm_combo_text_new) : use g_object_new.

2002-02-02  Jody Goldberg <jody@gnome.org>

	* gnumeric-hscrollbar.c : lose some functionality in the port to
	  gtk-13., but enable the most important aspect, extension past
	  current max.
	* gnumeric-vscrollbar.c : ditto.

2002-02-05  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (update_rangesel_text) : when deleting 
	  text to add new text don't emit a signal partially through 
	  the process.

2002-01-30  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (el_init) : delete to work around a change
	  in canvas initialization sequence.  The adjustments may not exist yet.
	(el_realize) : initialize them here.

2002-01-21  Jody Goldberg <jody@gnome.org>

	* Release 1.0.3

2002-01-19  Andreas j. Guelzow <aguelzow@taliesin.ca>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_rangesel_start) :
	  rewrite

2002-01-19  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_class_init) : add 
	  "rangesel_drag_finished" signal.
	(gnumeric_expr_entry_end_of_drag) : emit it here.

2002-01-15  Jody Goldberg <jody@gnome.org>

	* Release 1.0.2

2002-01-13  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (el_edit_sync) : when starting to edit
	  use a font colour to match the background.
	(el_start_editing) : restore the contrasting colour.

2002-01-12  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (editable_label_set_color) : new routine.
	(editable_label_new) : take an optional colour.

2002-01-06  Jody Goldberg <jody@gnome.org>

	* Release 1.0.1

2001-12-31  Jody Goldberg <jody@gnome.org>

	* Release 1.0.0

2001-12-24  Jody Goldberg <jody@gnome.org>

	* Release 0.99.1

2001-12-22  Andreas J. Guelzow <aguelzow@taliesin.ca>

	http://bugzilla.gnome.org/show_bug.cgi?id=65894
	* gnumeric-expr-entry.c (gnumeric_expr_entry_button_press_event) :
	  new signal handler
	(gnumeric_expr_entry_class_init) : install 
	  gnumeric_expr_entry_button_press_event

2001-12-19  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_parse) : make starting a
	  range selection optional.

2001-12-15  Jody Goldberg <jody@gnome.org>

	* Release 0.99.0

2001-12-12  Jody Goldberg <jody@gnome.org>

	* widget-editable-label.c (el_entry_activate) : gtk_entry_get_text const.
	(el_edit_sync) : ditto.
	* widget-font-selector.c (size_changed) : ditto.
	* gnumeric-combo-text.c (cb_entry_activate) : ditto.

	* gnumeric-toolbar.c (gnumeric_toolbar_get_type) : Delete finalize it
	  was a NOP.

2001-11-25  Jody Goldberg <jody@gnome.org>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_parse) : use
	  expr_parse_str.

2001-11-18  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_rangesel_start) : correct
	  the sense of the singleton test.
	(gnumeric_expr_entry_parse) : reset the cursor if the bound changes.

2001-11-14  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_parse) : avoid infinite
	  recursion for people connected to the changed signal.

2001-11-13  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_rangesel_meaningful) :
	handle empty entries correctly.

2001-11-10  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_rangesel_meaningful) :
	  rethink this.
	(gnumeric_expr_entry_rangesel_start) : improve parser.  Still needs
          more work.

2001-11-09  Jody Goldberg <jgoldberg@home.com>

	* widget-font-selector.c (cb_get_cell_style) : fix style ref leak.

2000-11-09  Morten Welinder  <terra@diku.dk>

	* widget-font-selector.c (size_selected): Use reload_preview.
	(fs_destroy): Plug leak.

2001-11-09  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_rangesel_start) : begin
	parsing the sheet name.  Still need to support starting in the
	sheetname, and to actually use the name.
	(gnumeric_expr_entry_parse) : new utility.

2001-11-05  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (make_rangesel_text) : don't use the flags,
	  store the ab/srel info in the selector.
	(update_rangesel_text) : use the pos from the entry.
	(gnumeric_expr_entry_rangesel_start) : new routine to find the start
	  of a range.  Still needs work to support intra-{sheet,book}
	  references.
	(gnumeric_expr_entry_key_press_event) : move F4 handling here.

2001-11-05  Jody Goldberg <jgoldberg@home,com>

	* Release 0.75

2001-10-29  Jody Goldberg <jgoldberg@home.com>

	* Release 0.74

2001-10-29  Jody Goldberg <jgoldberg@home.com>

	* Release 0.73

2000-10-25  Morten Welinder  <terra@diku.dk>

	* widget-font-selector.c (font_selected): Plug leak.
	(style_selected): Ditto.
	(size_changed): Ditto.
	(font_selector_set_style): Ditto.
	(font_selector_set_strike): Ditto.
	(font_selector_set_underline): Ditto.
	(font_selector_set_color): Ditto.
	(fs_destroy): Ditto.

2001-10-18  Jody Goldberg <jgoldberg@home.com>

	* Release 0.72

2001-10-10  Jody Goldberg <jgoldberg@home.com>

	http://bugzilla.gnome.org/show_bug.cgi?id=62109
	* widget-font-selector.c (reload_preview) : send a style with only the
	  elements that changed, not the entire format.  Only send the signal
	  if something actually changed.
	(font_selected) : signature change for reload_preview.
	(style_selected) : Ditto.
	(size_changed) : Ditto.
	(canvas_size_changed) : Ditto.
	(font_selector_set_value) : Ditto.
	(font_selector_set_style) : Ditto.
	(font_selector_set_strike) : Ditto.
	(font_selector_set_underline) : Ditto.
	(font_selector_set_color) : Ditto.

2001-10-07  Jody Goldberg <jgoldberg@home.com>

	* Release 0.71

2001-10-04  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-combo-text.c : fix a compiler warning.

2001-10-04  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-combo-text.c : Add some signals to clarify the useful
	  events.  Remove the useless hash.  Search the displayed list
	  directly.  Add some control on where to start searching the list.
	  Provide feedback on whether an item is in the list.  Return a handle
	  to list items.  Rewrite a big chunk.

2001-10-02  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-combo-text.c (scroll_size_request_cb) : size the popup to
	  match the entry.
	(gnm_combo_text_construct) : hook up the size-allocate callback.
	  always wrap things in a scrolled window.
	(gnm_combo_text_add_item) : rename 'value' -> 'key' to be clearer that
	  it is not displayed.

2001-09-30  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_set_rangesel_from_dep) :
	  rename from gnumeric_expr_entry_set_rangesel_from_text and make it
	  more applicable.  This gives us easier access to the parsed
	  expression.
	(gnumeric_expr_entry_key_press_event) : Alt-Enter should be supported
	  in all entries, but only the main entry should get ctrl-enter
	  support.

2001-09-28  Jody Goldberg <jgoldberg@home.com>

	* Makefile.am (libwidgets_a_SOURCES) : temporarily move gal's
	  gtk_combo_text here as gnm_combo_text.  The original needs some
	  major work to make graph guru possible.

2001-08-20  Jody Goldberg <jgoldberg@home.com>

	* Release 0.70

2001-08-18  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c : revert my move to finalize vs destroy.

2001-08-11  Jody Goldberg <jgoldberg@home.com>

	* Release 0.69

2001-07-17  Jody Goldberg <jgoldberg@home.com>

	* Release 0.68

2001-07-10  Almer S. Tigelaar  <almer@gnome.org>

	* gnumeric-vscrollbar.c (gnumeric_vscrollbar_button_press): Also keep
	scrolling on a single, short click.

	* gnumeric-hscrollbar.c (gnumeric_hscrollbar_button_press): Idem.

2001-07-07  Almer S. Tigelaar  <almer@gnome.org>

	* widget-font-selector.c (cb_get_row_height): Adjust signature for
	changes to the preview-grid.
	(cb_get_col_width): Idem.
	(cb_get_cell_style): Idem.
	(cb_get_cell_value): Idem.
	(fs_init): Remove setting of callback arguments, instead connect signal
	callbacks to the preview grid.

2001-07-07  Almer S. Tigelaar  <almer@gnome.org>

	* widget-font-selector.c (reload_preview): Drastically revise, burned
	most of the existing code. Emits the font_changed signal.
	(font_selected): Set name directly on MStyle.
	(style_selected): Idem for bold/italic.
	(size_selected): Idem for size.
	(size_changed): Idem.
	(cb_get_row_height): Callback for newly integrated preview-grid. Returns
	dynamically determined row height of a single cell.
	(cb_get_col_width): Idem for column width.
	(cb_get_cell_style): Idem for the style.
	(cb_get_cell_value): Idem for previewing text.
	(canvas_size_changed): Callback to cope for changes in size of the canvas,
	the information collected here is used in cb_get_{col/row}_{width/height}
	(fs_init): Remove gnome-font stuff and initializations of other, removed,
	fs members. Create a preview-grid instead.
	(fs_destroy): Unref preview mstyle and remove the gnome-font code.
	(fs_class_init): Initialize new font_changed signal.
	(font_selector_set_value): New, set preview value.
	(font_selector_set_style): Set on MStyle directly.
	(font_selector_set_strike): New, set strikethrough argument.
	(font_selector_set_underline): New, set underline style.
	(font_selector_set_color): New, set font (fore) color of text.
	(font_selector_set_screen_res): Burn.

2001-06-28  Jody Goldberg <jgoldberg@home>

	* Release 0.67

2001-06-27  Jody Goldberg <jgoldberg@home.com>

	* Release 0.66

2001-05-30  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.c (gnumeric_expr_entry_set_scg): Use
	sc_sheet function to access sheet.

2001-05-22  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.[ch]
	(gnumeric_expr_entry_at_subexpr_boundary_p): Rename to
	gnumeric_expr_entry_rangesel_meaningful.
	Rangesel after ':' or ')' do not make sense. Return FALSE. 

2001-05-20  Jody Goldberg <jgoldberg@home.com>

	* Release 0.65

2001-05-15  Almer S. Tigelaar  <almer@gnome.org>

	* gnumeric-hscrollbar.c (gnumeric_hscrollbar_button_press): Adjust
	for new live toggling
	(gnumeric_hscrollbar_init): Idem.
	(gnumeric_hscrollbar_adjustment_value_changed): Idem.

	* gnumeric-vscrollbar.c (gnumeric_vscrollbar_button_press): Adjust
	for new live toggling
	(gnumeric_vscrollbar_init): Idem.
	(gnumeric_vscrollbar_adjustment_value_changed): Idem.

2001-05-14  Miguel de Icaza  <miguel@ximian.com>

	* Makefile.am (libwidgets_a_SOURCES): Removed unused scrollbar code. 

2001-05-11  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.[ch] (gnumeric_expr_entry_freeze,
	gnumeric_expr_entry_thaw ): New functions, freeze/thay display
	updating.

	* gnumeric-expr-entry.c (struct _GnumericExprEntry): Add
	freeze_count and pos members to support feeze/thaw.
	(gnumeric_expr_entry_set_rangesel_from_text): We don't support
	this method while frozen. Trap it.
	(make_display_range): Simplify signature. Parameters are now a
	target range and the expr entry.
	(make_rangesel_text): Simplify signature. expr entry is now the
	only paramater. Take merged cells into account, displaying only
	the corner cell if range is a merged cell.
	(update_rangesel_text): Take pos parameter from expr_entry state,
	so that it can be called from gnumeric_expr_entry_thaw.
	(gnumeric_expr_entry_set_rangesel_from_range): Don't change text
	while frozen.
	(gnumeric_expr_entry_get_rangesel): Use new signature of
	make_display_range. 
	(gnumeric_expr_entry_toggle_absolute): Send pos to
	update_rangesel_text via expr_entry state.

2001-05-08  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-expr-entry.c (make_rangesel_text) : constness.
	(gnumeric_expr_entry_set_rangesel_from_range) : ditto.
	(make_display_range) : ditto.

2001-05-06  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.c (range_really_changed): Remove.
	(make_display_range): New function. Makes a range, possibly
	expanded to contain full rows/columns.
	(make_rangesel_text): Use make_display_range.
	(gnumeric_expr_entry_set_rangesel_from_range): Return true if
	displayed range is different from input range. Save the range
	passed in without change. Use range_equal + sheet equality test
	instead of range_really_changed.
	(gnumeric_expr_entry_get_rangesel): Get range and/or sheet set in
	widget.

2001-05-04  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.h: GnumericExprEntryPrivate is
	unused. Remove. 

	* gnumeric-expr-entry.c
	(gnumeric_expr_entry_set_rangesel_from_range):  Make sure that pos
	>= 0. Implement full column and full row flags.
	(gnumeric_expr_entry_toggle_absolute): Call update_reangesel_text
	with pos = 0.

2001-04-18  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.c
	(gnumeric_expr_entry_set_rangesel_from_range): Don't call
	widget_is_focus. This makes selecting a range from the cell work
	again.
	(widget_is_focus): Remove.

2001-04-18  Jon K Hellan  <hellan@acm.org>

	* gnumeric-expr-entry.[ch]: New expression / range selection
	widget.

2001-03-17  Jody Goldberg <jgoldberg@home.com>

	* Release 0.64

2001-03-12  Jody Goldberg <jgoldberg@home.com>
	For  Vlad Harchev <hvv@hippo.ru>

	* widget-editable-label.c (editable_label_set_text) :
	  Use colours from Style.

2001-03-10  Almer S. Tigelaar  <almer@gnome.org>

	* gnumeric-[vh]scrollbar.c, gnumeric-[vh]scrollbar.h
	(gnumeric_[vh]scrollbar_adjustment_value_changed): Emit extra
	signal parameter and remove setting of tooltip.
	(gnumeric_[vh]vscrollbar_button_press): Remove the tooltip entirely and
	add support for shift click live scrolling.
	(gnumeric_[vh]vscrollbar_button_release): Pass extra signal parameter and
	remove destroying of tooltip.
	(gnumeric_[vh]scrollbar_class_init): Add extra signal parameter.

2001-03-10  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-[vh]scrollbar.c (gnumeric_[vh]scrollbar_button_press) : avoid
	  generating a spurious signal when pressing on the scrollbar but not
	  moving.

2001-03-05  Almer S. Tigelaar  <almer@gnome.org>

	* gnumeric-vscrollbar.c, gnumeric-vscrollbar.h : New, vscrollbar widget.

	* gnumeric-hscrollbar.c, gnumeric-hscrollbar.h : New, hscrollbar widget.

	* Makefile.am : Add gnumeric-[vh]scrollbar.*

2001-02-23  Jody Goldberg <jgoldberg@home.com>

	* Release 0.63

2001-02-16  Jody Goldberg <jgoldberg@home.com>

	* Release 0.62

2000-12-17 Jody Goldberg <jgoldberg@home.com>

	* Release 0.61

2000-12-7  Jody Goldberg <jgoldberg@home.com>

        * Release 0.60

2000-11-18  Jody Goldberg <jgoldberg@home.com>

	* Release 0.59

2000-11-13  Jody Goldberg <jgoldberg@home.com>

        * Release 0.58

2000-10-10  Jody Goldberg <jgoldberg@home.com>

        * Release 0.57

2000-09-17  Jody Goldberg <jgoldberg@home.com>

	* Makefile.am : Moved lots of widgets into the Gnome Application
	  Library for more general use.

2000-09-11  Morten Welinder  <terra@diku.dk>

	* color-group.c (color_group_new_named): Constify.  Plug leak.

	* color-palette.c (color_palette_new_with_vals): Constify.
	(color_palette_new): Constify.

2000-09-10  Miguel de Icaza  <miguel@helixcode.com>

	* widget-editable-label.c (el_start_editing): Optionally select
	the entire text. 
	(el_button_press_event): Double click should start editing with
	all the text selected.

2000-09-11  Jody Goldberg <jgoldberg@home.com>

	* widget-color-combo.c (color_table_setup) : We need to ungrab from
	  the combo when the custom colour dialog is brought up.
	(cb_cust_color_clicked) : restore.

	* color-palette.c (color_palette_get_color_picker) : New function.

2000-09-06  Jody Goldberg <jgoldberg@home.com>

	* color-group.c (color_group_new_named) : strdup the name if it is
	  supplied by the user.
	(color_group_class_init) : Use the destroy method.

2000-09-03 Michael Levy  <mlevy@genoscope.cns.fr>

	* color-group.c : Re-write of color-combo-group.c to allow
	for arbitrary widgets to share a common color history.

	* widget-color-combo.c : 
	Extracted all the code required to make the color table and moved it to a
	new object (ColorPalette). Changed the ColorCombo so that it uses
	the ColorPalette (and the shared color hsitory provided by the groupped
	ColorPalettes).
	All the code that refered to the creation of the color table was
	removed, and when appropriate, moved to color-palette.c
	Removed all mention of ColorComboGroups (as these no longer exist).

	* color-palette.c : Extracted from widget-color-combo.c
	(color_palette_new) : Creates a color palette.
	(color_palette_get_current_color) : returns the current color.


2000-07-30  Michael Levy  <mlevy@genoscope.cns.fr>

	* color-combo-group.c : New GtkObject meant to group color combo boxes so
	that their custom color histories are shared.
	Includes functions to create and destroy the object, as
	well as those required size, and navigate through the custom color history.

	* widget-color-combo.c 
	(group_new_custom_color) : New function to handle the
	new_custom_color signal emitted by the ColorComboGroup
	(custom_color_history_setup) : New function which initialises a
	combo box's custom color history with the one stored in the group
	(color_table_setup) : Added call to custom_color_history_setup.
	(cust_color_set) : Removed call to cust_color_row_shift and moved
	it to group_new_custom_color. Also added call to
	color_combo_group_add_color in order to notify group of change
	(color_combo_new_with_vals) : Added mandatory group name to
	function prototype. Also added call to color_combo_group_new_named
	and connected the "new_custom_color" signal emitted by the newly
	created group to group_new_custom_color
	(color_combo_new) : Added mandatory group name to function
	prototype.

	* widget-color-combo.c (color_combo_new) : Added mandatory group
	name to function prototype.

2000-07-24  Jody Goldberg <jgoldberg@home.com>

	* widget-font-selector.c (reload_preview) : adjust to the changes in
	  gnome-print.

2000-07-02  Jody Goldberg <jgoldberg@home.com>
	for Michael Levy <mlevy@genoscope.cns.fr>

	* widget-color-combo.c (cust_color_row_shift) : new function.
	(cust_color_set) : Call cust_color_row_shift.
	(color_table_button_new) : Abstract this from.
	(color_table_setup) : Here.

2000-06-30  Morten Welinder  <terra@diku.dk>

	* widget-font-selector.c (font_selector_set_points): Remove
 	borderline fixed limit.
	(fs_fill_font_size_list): Ditto.

2000-06-21  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-stack.c (gtk_combo_stack_destroy) : warning suppression.

2000-06-18  Jody Goldberg <jgoldberg@home.com>

        * Release 0.56

2000-06-18  Jody Goldberg <jgoldberg@home.com>

        * Release 0.55

2000-06-13  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (strcase_hash, strcase_equal): New case
	insensitive hash and compare functions. We already have these in
	gutils.c, but this widget can't import gutils.h.
	(gtk_combo_text_set_case_sensitive): New public function:
	Specifies whether the text entered into the GtkEntry field and the
	text in the list items is case sensitive.
	(entry_activate_cb): New static function. Select corresponding
	list item when user enters a choice in entry field.
	(list_select_cb): Block entry_activate_cb when emitting "activate"
	on entry. Otherwise, endless loop would result.
	(update_list_selection): New function. Guts of
	gtk_combo_text_set_text moved here, since it is also used by
	entry_activate_cb. 
	(gtk_combo_text_set_text): See previous entry.
	(gtk_combo_text_construct): Construct widget as case insensitive,
	which is also the default for GtkCombo. Connect entry_activate_cb.

	* gtk-combo-text.h (gtk_combo_text_set_case_sensitive): Declare
	new function.
	(struct _GtkComboText): Add 'case_sensitive' member.

2000-06-11  Jon K Hellan  <hellan@acm.org>

	* gnumeric-dashed-canvas-line.c (hypothenuse): New static helper
	function. 
	(double_line_draw): New function. Draw a double line. Even explain
	in nice ASCII art how we do it.
	(gnumeric_dashed_canvas_line_draw): Special case double lines by
	punting to double line draw.

2000-06-08  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (gtk_combo_text_set_text): Silence run-time
	warning: Check for non-null list item from hash before casting to
	widget.

	* gtk-combo-text.[ch] (gtk_combo_text_set_text): New function. Set
	displayed text, and select it in the list if present.

	* gtk-combo-text.c (cb_remove_from_hash): New function. Remove
	list item widget from hash when item is deleted.
	(gtk_combo_text_add_item): Store list item widget in hash instead
	of list item position. This way, it works even if items are
	deleted.

2000-05-29  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-stack.c (gtk_combo_stack_construct) : The button cannot
	  have focus.

2000-05-28  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-stack.c (gtk_combo_stack_construct) : The button relief
	  needs to be set too.

2000-05-28  ERDI Gergo  <cactus@cactus.rulez.org>

	* gtk-combo-stack.c: New clear() method

	* gtk-combo-stack.[ch]: Create the stack widget with a stock
	pixmap

	* gtk-combo-box.c (gtk_combo_box_set_arrow_sensitive): new method
	to make the dropdown button sensitive/unsensitive

2000-05-27  ERDI Gergo  <cactus@cactus.rulez.org>

	* gtk-combo-stack.[ch]: New widget to do nice Undo/Redo buttons
	with a dropdown list

2000-05-21  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (gtk_combo_text_destroy): Disconnect
	list_unselect_cb, otherwise we get warnings during list shutdown.
	(list_select_cb): Change it to handle list::select_child instead
	of listitem::select. Change signature accordingly.
	(list_select_cb): Invalidate cached state if selecting cached
	widget. 
	(list_unselect_cb): New callback. Handles unselect by re-selecting
	if list is visible. This makes it impossible to deselect
	interactively. 
	(cb_toggle): New callback. Handle <Ret> which by default toggles
	the list item, and make it select instead.
	(gtk_combo_text_add_item): Don't connect list_select_cb, that's
	now done in gtk_combo_text_construct. Connect cb_toggle.
	(gtk_combo_text_construct): Connect list_select_cb and
	list_unselect_cb.

2000-05-20  Jody Goldberg <jgoldberg@home.com>

        * Release 0.54

2000-05-19  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (cb_enter): To fix bug where mouseover
	highlight would never go away, only cache selected and normal
	states. 
	(cb_exit): Only restore state if cached state belongs to this
	widget. 

2000-05-18  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (cb_list_mapped): Do nothing if no selection.

2000-05-18  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.c (cb_list_mapped): New callback function. Sets
	focus to selected item, which also happens to make it visible.
	(gtk_combo_text_construct): Call
	gtk_container_set_focus_hadjustment - this enables autoscroll and 
	keyboard scrolling. Connect cb_list_mapped.

2000-05-15  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-box.h: Declare gtk_combo_box_set_display. It was
	declared global in gtk-combo-box.c - apparently on purpose.

	* gtk-combo-box.c: Make behaviour more like tearoff menus for
	consistency: Make it possible to popup the original combo while
	the tearoff menu is up.
	(deactivate_arrow): New function. Set arrow button visual to
	inactive. Code moved from gtk_combo_box_popup_hide_unconditional.
	(gtk_combo_box_popup_hide_unconditional): See above.
	(gtk_combo_box_popup_hide): Handle case where popup is hidden
	while tearoff menu is up.
	(gtk_combo_box_popup_display): Remove !torn_off assertion and
	handle torn_off case.
	(gtk_combo_popup_tear_off): Add set_position parameter, true if
	tearoff window wasn't already up. Queue a resize to fix confusion
	about size.
	(gtk_combo_set_tearoff_state): Deactivate arrow button when
	tearing off - because button now works as usual in torn off state.
	(gtk_combo_tearoff_bg_copy): Remove #if 0 around it. Make comment
	short and clear now that I understand what it's for. More info in
	comment at point it is called from. Use allocation geometry
	instead of requisition, in case tearoff window has been resized.
	(cb_tearable_button_release): Remove some unnecessary
	conditionals. Too much cut and paste?

2000-05-07  Jody Goldberg <jgoldberg@home.com>

	* gnumeric-toolbar.c (gnumeric_toolbar_new) : Take an accel_group.
	(gnumeric_toolbar_construct) : Ditto.

2000-05-10  Jon K Hellan  <hellan@acm.org>

	* widget-font-selector.c (list_realized): Rename to
	list_mapped. List must be mapped before we can move to a list
	element. realized is not enough. See gtkclist.c:
	vadjustment_value_changed (ca l. 6147).
	(fs_fill_font_name_list, fs_fill_font_style_list,
	fs_fill_font_size_list): Replace realize signal and list_realized
	handler with map and list_mapped.

2000-05-09  Jody Goldberg <jgoldberg@home.com>

	* Release 0.53

2000-04-22  Almer. S. Tigelaar.  <almer1@dds.nl>

	* widget-editable-label.c : Added new event "editing_stopped", 
	this signal is emmited when the user presses "ESC" or presses
	the mouse button(s) outside the editable label. 

2000-04-09  Morten Welinder  <terra@diku.dk>

	* widget-font-selector.c (reload_preview): Plug leaks.

2000-04-09  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-text.[ch]: Fix problem with mouseover: Mouseover from
	last time popup was up persists if popup was last dismissed with
	Escape. 

	* gtk-combo-text.h (_GtkComboText): Add member to remember which
	entry widget we are caching.

	* gtk-combo-text.c (gtk_combo_text_destroy): Disconnect
	cb_pop_down.
	(cb_enter): Remember which entry widget we are caching.
	(cb_pop_down): New callback function. Forget cached entry widget.
	(gtk_combo_text_construct): Note that we're not yet caching any
	entry widget.
	(gtk_combo_text_new): Connect cb_pop_down to pop_down_done.

	* gtk-combo-box.c (gtk_combo_popup_tear_off): Add missing cast to
	kill warning.
	(gtk_combo_tearoff_bg_copy): It's not in use. #ifdef 0 it, and add
	comment about when it would be needed.
	(gtk_combo_popup_reparent): Add FIXME comment about code which
	isn't used, but will be needed.

2000-04-07  Morten Welinder  <terra@diku.dk>

	* widget-pixmap-combo.c (pixmap_combo_destroy): Unref, not destroy.

2000-04-07  Miguel de Icaza  <miguel@gnu.org>

	* widget-pixmap-combo.c (pixmap_combo_class_init): Replace
	::finalize with ::destroy.

	(pixmap_combo_finalize): Fix leak.

2000-04-06  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-text.c (cb_enter) : Only change the state if the element
	  is not already selected.
	(cb_leave) : Ditto.

2000-04-05  Jody Goldberg <jgoldberg@home.com>

	* widget-color-combo.c (color_combo_finalize) : Unref the tooltip too.

	* gtk-combo-text.c (gtk_combo_text_destroy) : New routine.
	(gtk_combo_text_class_init) : Install a destructor.

2000-03-29  Jon K Hellan  <hellan@acm.org>

	* gtk-combo-box.h (gtk_combo_box_set_title): Declare

	* gtk-combo-box.c: Implement tearoff combo boxes.
	(struct _GtkComboBoxPrivate): New/renamed
	members: toplevel, tearoff_window: Popup's toplevel when
	torn_off/not torn off. torn_off: Tearoff status flag. Names are
	the same as in gtk/gtkmenu.c. tearable: The tearoff
	"button". popup: The widget which gets torn off. This is actually
	the event box.
	(gtk_combo_box_finalize): Destroy tearoff window.
	(gtk_combo_box_popup_hide): Turned into a wrapper which does
	nothing if popup is torn off, and calls
	gtk_combo_box_popup_hide_unconditional if it isn't.
	(gtk_combo_box_popup_hide_unconditional): Contains the logic which
	used to be in gtk_combo_box_popup_hide. If torn off, the popup is
	reattached after hiding.
	(gtk_combo_box_popup_display): Realize popup as well as toplevel.
	(gtk_combo_toggle_pressed): Use
	gtk_combo_box_popup_hide_unconditional. 
	(gtk_combo_box_key_press): New function. Dismiss popup on escape.
	(gtk_combo_box_init): Various renamings. Connect key press handler.
	(gtk_combo_get_parent_toplevel): 
	(gtk_combo_popup_tear_off): New function. Tear off the popup.
	(cb_tearable_button_release): Toggle tearoff state.
	(gtk_combo_box_construct): Make tearoff menu item no fill, no
	expand. 
	(gtk_combo_box_set_title): New function. Set a title to display
	over the tearoff window.

2000-03-26  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-text.c : Add a hash to be used for proper lookup of
	  entries made directly in the edit area.  Yes morten it leaks.
	(gtk_combo_text_construct) : Make scrolling
	  optional.
	(gtk_combo_text_add_item) : Add some brute force mouse over effects.
	  Still need autoscroll, and cancel.

2000-03-25  Jody Goldberg <jgoldberg@home.com>

	* widget-color-combo.c (color_table_setup) : Init the new custom_color data.
	(set_color) : We can set the colour to NULL.  This signifies that the
	  optional no_color is in use.  Outline the colour bar if the current is NULL.
	(cb_nocolor_clicked) : Renamed from desc_label_clicked.  This is NOT a
	  descriptive label, it is a button.
	(color_combo_finalize) : Free the custom colour.
	(cust_color_set) : Do not use static variables for things like this.

	* widget-color-combo.h (ColorCombo) : Add custom_colour and
	  custom_colour_allocated.

2000-03-24  Jody Goldberg <jgoldberg@home.com>

	* gtk-combo-text.c (gtk_combo_text_select_item) : New function.

