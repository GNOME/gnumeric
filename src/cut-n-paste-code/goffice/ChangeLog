2004-11-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-renderer-pixbuf.c (line_size): width <= 0. is hairline.
	* graph/gog-renderer.c (gog_render_line_size): ditto.
	* graph/gog-style.c (cb_outline_size_changed): round to 2 significant
	digits since sometimes adj->value returns 1E-17 instead of zero.
	(cb_line_size_changed): ditto.
	(gog_style_apply_theme): handle dash_type property.
	(gog_style_gradient_sax_save): fix brightness test to be consistent
	with dom_save.
	(gog_style_gradient_load): start-color and end-coilor were inverted.
	(gog_style_is_outline_visible): line is visible for all width values.
	(gog_style_is_line_visible): ditto.
	(gog_style_force_auto): handle auto_dash.
 	* graph/plugins/plot_xyt/gog-xy.c (gog_xy_series_init_style): handle
	dash_type property.

2004-11-14  Andreas J. Guelzow <aguelzow@taliesin.ca>

	http://bugzilla.gnome.org/show_bug.cgi?id=152514
	* graph/gog-guru.c (graph_guru_init_ok_button): new
	(graph_guru_init): call graph_guru_init_ok_button
	(gog_guru): initialize state->editing

2004-11-07  Jody Goldberg <jody@gnome.org>

	* Release 1.3.93

2004-10-31  Jody Goldberg <jody@gnome.org>

	* Release 1.3.92

2004-11-01  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=157048
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): fix
	leak.

2004-10-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152765
	* graph/gog-guru.c (graph_guru_init_format_page): delete_button is
	really a button now, so connect "clicked" signal instead of
	"activate".
	* graph/gog-guru.glade: replace "Delete" menuitem by a button as a
	workaround of gtk+ bug #155336.

2004-10-29  Morten Welinder  <terra@gnome.org>

	* cut-n-paste/pcre/pcre.c (ord2utf8): Fix ABR.  (Fixed in PCRE
	5.0, but I don't want to upgrade right now.)

2004-10-27  Morten Welinder  <terra@gnome.org>

	* utils/go-line.c (go_line_clip_vpath): Make sure "reject" is
	initialized.
	(GOLineDashDesc): Do not rely on C99 features.

2004-10-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.c (gog_style_gradient_load): fix brightness case.

2004-10-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): fix
	marker for missing data.

2004-10-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152585
	* grah/gog-axis.c (gog_axis_update): allways emit changed signal for
	discrete axis, since labels may have changed.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update): call
	gog_axis_bound_changed if GogSeries1_5D->index_changed == TRUE.
	(gog_series1_5d_dim_changed): new. Used to set index_changed to TRUE
	when vector dim_i == 0 changed.
				      
2004-10-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (draw_axis_from_a_to_b): use
	gog_style_is_line_visible instead of checking line width.
	(gog_axis_view_render): ditto.
	* graph/gog-label.c (gog_label_view_render): draw sharp rectangle
	around label.
	* graph/gog-legend.c (cb_render_elements): draw sharp sample line and
	sharp rectangle around elements.
	(gog_legend_class_init): set clip to TRUE in order to avoid sample
	lines to extend beyond legend area.
	* graph/gog-outlined-object.c (gog_outlined_view_size_request): use
	gog_style_is_line_visible instead of checking for positive line width.
	(gog_outlined_view_size_allocate): ditto.
	(gog_outlined_view_render): draw sharp rectangle.
	* graph/gog-renderer-gnome-print.c (set_dash): new.
	(gog_renderer_gnome_print_draw_path): honor dash setting. Clip dashed path
	in order to avoid huge memory allocation and crash for very long
	lines.
	(gog_renderer_gnome_print_draw_polygon): ditto.
	* graph/gog-renderer-impl.h: add GogRenderer::line_dash and
	GogRenderer::outline_dash members.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_clip_push): fix
	clip area rounding.
	(line_size): new. Same as gog_renderer_line_size, but don't round
	width < 1.0 .
	(gog_renderer_pixbuf_line_size): use line_size.
	(gog_renderer_pixbuf_sharp_path): fix rounding.
	(gog_renderer_pixbuf_draw_path): honor dash setting.
	(gog_renderer_pixbuf_draw_polygon): ditto.
	* graph/gog-renderer-svg.c (gog_renderer_svg_clip_push): use C locale
	for double to string conversion.
	(stroke_dasharray): new.
	(gog_renderer_svg_draw_path): honor dash setting.
	(gog_renderer_svg_draw_polygon): ditto.
	* graph/gog-renderer.c: define a hair line width and set it to 0.24pt.
	(gog_renderer_finalize): free line_dash and outline_dash.
	(update_dash): new. 
	(gog_renderer_push_style): call update_dash.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_clip_push): keep a pointer to the current clip.
	(gog_renderer_clip_pop): ditto.
	(draw_rectangle): new.
	(gog_renderer_draw_sharp_rectangle): new.
	(gog_renderer_line_size): return GOG_RENDERER_HAIR_LINE_WIDTH instead
	of 1.0 for style->line.width == 0.0 .
	* graph/gog-style-prefs.glade: add dash type combos.
	* graph/gog-style.c (cb_outline_dash_type_changed): new.
	(cb_line_dash_type_changed): new.
	(outline_init): add dash selector.
	(line_init): ditto.
	(gog_style_line_load): load dash settings.
	(gog_style_line_dom_save): save dash settings.
	(gog_style_line_sax_save): ditto.
	(gog_style_is_different_size): check dash_type.
	(gog_style_is_outline_visible): new.
	(gog_style_is_line_visible): check dash_type.
	* graph/gog-theme.c (gog_themes_init): use dash_type.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): don't
	draw sharp path.
	* utils/go-line.[ch]: new.	

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-axis.c: add center_on_ticks boolean to force centering labels
	on ticks for discree mapped axis.
	* graph/gog-plot.h: ditto.
	* graph/gog-plot.c: ditto.

2004-10-19  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_dirname_from_uri): New function.

2004-10-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_dim_changed): call gog_axis_update in
	order to refresh labels and ticks.

2004-10-13  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_get_entry): Remove band-aid no longer
	needed.  (Although files created in the past few days will have
	the vector type in the file.)

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-axis.c: (make_dim_editor): replace TRUE by GO_DATA_SCALAR in the
	call to gog_data_allocator_editor.
	* graph/gog-label.c: (gog_label_editor): ditto.
	* graph/gog-series.c: (gog_series_editor): ditto.

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-plot-impl.h: added a foreach_elem member in GogPlotClass
	* graph/gog-plot.c: (gog_plot_foreach_elem): calls Klass->foreach_elem
	when not NULL to override default legends management.
	* graph/gog-renderer-gnome-print.c: (draw_path): add ART_MOVETO_OPEN case,
	(gog_renderer_gnome_print_measure_text): fix a bad sign.
	* graph/gog-renderer-svg.c: (draw_path): add ART_MOVETO_OPEN case.

2004-10-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.h (GogAxisTickTypes): Fix namespace.

	* graph/gog-axis.c (GogAxisElemType): Name this type.
	(gog_axis_get_entry): Use GogAxisElemType, not unsigned int, for
	the index argument.

2004-10-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (map_linear_auto_bound): Fix gnm_float/double
	confusion.
	(gog_axis_get_entry): Temporary fix for user-defined axis limits.

2004-10-11  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_finalize): Plug leak.

2004-10-11  Jody Goldberg <jody@gnome.org>

	* gui-utils/Makefile.am : drop the dock code we're not going to be
	  using it before 1.4

2004-10-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=154664
	* graph/gog-guru.glade: set width and height request for sample area
	and object list.

2004-10-09  Jean Brefort <jean.brefort@normalesup.org>

	* graph/go-data.c: (go_data_matrix_emit_changed),
	(go_data_matrix_class_init), (go_data_matrix_get_size),
	(go_data_matrix_get_values), (go_data_matrix_get_value),
	(go_data_matrix_get_str), (go_data_matrix_get_minmax): new GOMatix class.
	* graph/go-data.h: ditto.
	* graph/go-data-impl.h: ditto.
	* graph/goffice-graph.h: ditto. Added GODataType enumerated type.
	* graph/gog-data-allocator.c: (gog_data_allocator_editor): Replaced
	"gboolean prefers_scalar" by "GODataType data_type". 
	* graph/gog-data-allocator.h: ditto.
	* graph/gog-error-bar.c: (cb_type_changed), (gog_error_bar_prefs): 
	* graph/gog-series.c: (gog_series_editor): ditto.
	* graph/plugins/plot_surface/Makefile.am: new contour plots.
	* graph/plugins/plot_surface/gog-contour-prefs.c: ditto.
	* graph/plugins/plot_surface/gog-contour-prefs.glade: ditto.
	* graph/plugins/plot_surface/gog-surface.c: ditto.
	* graph/plugins/plot_surface/gog-surface.h: ditto.
	* graph/plugins/plot_surface/plot-types.xml.in: ditto.
	* graph/plugins/plot_surface/plugin.xml.in: ditto.

2004-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_dup) : copy the position.

2004-10-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_update) : Fix
	  redraw.  There were two bugs.
	  1) foocanvas_group_update was wiping tbe bounds (things always look
	     like they move)
	  2) We were not requesting a redraw for the old position before
	     moving.

2004-10-05  Jody Goldberg <jody@gnome.org>

	* Release 1.3.91

2004-10-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-control-foocanvas.c :  Make the class definition public to
	  make it easier to graft on an additional interface in the app.  We
	  may not need this later if SheetObject moves down into goffice

2004-10-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152672
	* graph/gog-theme.c (gog_themes_init): set pattern background to
	white, even when automatic pattern style is NONE.
	* graph/gog-label.c (gog_label_editor): fix layout.
	(gog_label_view_render): add padding
	when outline > 0. or pattern != NONE.
	* graph/gog-outlined-object.c (gog_outlined_view_size_request): ditto.
	(gog_outlined_view_size_allocate): ditto.
	* graph/gog-style.c (gog_style_is_different_size): changing pattern
	type can change object size.

2004-09-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-guru-type-selector.glade: new.
	* graph/Makefile.am: add gog-guru-type-selector.glade.
	* graph/gog-axis-prefs.glade: fix layout.
	* graph/gog-axis.c (make_dim_editor): ditto.
	(gog_axis_editor): ditto.
	* graph/gog-guru.c (cb_attr_tree_selection_change): allways use a
	notebook, but hide tabs when there's only one page.
	(graph_guru_type_selector_new): load layout from glade file.
	* graph/gog-guru-glade: remove scrollbar around property notebook.
	Make object menu unshrinkable. Fix layout.
	* graph/gog-series.c (gog_series_element_editor): fix layout.
	* graph/gog-style.c (font_int): ditto.
	* graph/plugins/plot_barcol/gog-barcol-prefs.glade: ditto.
	* graph/plugins/plot_pie/gog-pie-series.glade: ditto.
	* graph/plugins/plot_pie/gog-ring-prefs.glade: ditto.
	* graph/plugins/plot_xye/gog-xy-prefs.glade: ditto.
		
2004-09-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153402
	* graph/plugins/gog-radar-prefs.c: removed.
	* graph/plugins/gog-radar-prefs.glade: removed.
	* graph/plugins/gog-radar.c: removed reference to plot editor.
	* graph/plugins/Makefile.am: removed reference to
	gog-radar-prefs.[c,glade].

2004-09-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize):
	Conditionalise the use of pango_context_get_font_map.

2004-09-28  Morten Welinder  <terra@gnome.org>

	* utils/go-font.c (go_pango_fc_font_map_cache_clear): New
	function, wrapping pango_fc_font_map_cache_clear (which isn't
	public).

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Call
	go_pango_fc_font_map_cache_clear.

	* utils/go-color.c (go_color_to_pango): Add is_fore argument and
	export.

2004-09-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_info_at_point):
	disable automatic point creation for ring plot, since it
	doesn't work. For pie plot, don't create new point when it already
	exists, but select it.

2004-09-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153401
	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render): fix special
	inner arc handling test (has_hole :) ).

2004-09-27  Morten Welinder  <terra@gnome.org>

	* utils/go-math.c (go_fake_ceil): New function.

	* utils/go-file.c (go_url_encode): Make this half-way decent.
	(go_url_decode): Make this O(n) too.

	* libpresent/ppt-parsing-helper.h: Add header guard.

2004-09-27  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-gnome-print.c
	(gog_graph_print_to_gnome_print): Conditionalize call to
	gnome_print_pango_create_layout.

2004-09-26  Jody Goldberg <jody@gnome.org>

	From : Yukihiro Nakai  <nakai@gnome.gr.jp>
	http://bugzilla.gnome.org/show_bug.cgi?id=148550
	* utils/go-file.c (go_url_decode) : new
	(go_url_encode) : new.  I'm not sure these belong in go vs gsf
	  but lets keep them here for now until they get fleshed out.

2004-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar-prefs.glade: 12 px between label and control.
	* graph/gog-style-prefs.glade: 12 px padding. Use GtkAlignment for
	group layout.
	* graph/gog-style.c: use new layout.
	
2004-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar-prefs.glade: layout rework.
	* graph/gog-error-bar.c (cb_type_changed): use new layout. Hide styles
	when category is none.
	(gog_error_bar_prefs): ditto.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_view_render): draw_minor and draw_major
	only if line_width > 0.
	* grapg/gog-theme.c (gog_themes_init): initialize GogGrid outline.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_view_render): Calculate major_out even if
	line_width <= 0, because it's needed for label positionning.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c: make GogGridLine as child of GogAxis.
	(role_grid_line_can_add): new.
	(role_grid_line_major_can_add): new.
	(role_grid_line_minor_can_add): new.
	(role_grid_line_major_post_add): new.
	(role_grid_line_minor_post_add): new.
	(gog_axis_view_class_init): add grid line roles.
	(gog_axis_view_render_children): new. Don't render grid lines here.
	(gog_axis_view_render): call gog_axis_view_render_children. Free
	axis_list.
	* graph/gog-chart.c
	(gog_chart_view_class_init): set call_parent_render to FALSE.
	(grid_line_render): new. Render minor grid, then major.
	(gog_chart_view_render): new. Kludge for grid lines rendering before
	axis.
	* graph/gog-grid-line.c: add new is_minor property and remove type
	property.
	(gog_grid_line_is_minor): new.
	(gog_grid_line_view_render): implement radar grid.
	* graph/gog-grid.c: Remove grid line roles.
	(role_grid_line_can_add): removed.
	(role_grid_x_major_can_add): removed.
	(role_grid_x_minor_can_add): removed.
	(role_grid_y_major_can_add): removed.
	(role_grid_y_minor_can_add): removed.
	(role_grid_x_major_post_add): removed.
	(role_grid_x_minor_post_add): removed.
	(role_grid_y_major_post_add): removed.
	(role_grid_y_minor_post_add): removed.
	(gog_grid_view_render): sharpen polygon.
	(gog_grid_init_style): add OUTLINE property.
	* graph/gog-outlined-object.c: add a call_parent_render class
	property. Deafult to TRUE.
	* graph/gog-theme.c (gog_themes_init): add MajorGrid and MinorGrid
	themes. Remove X-MajorGrid, Y-MajorGrid, X-MinorGrid, Y-MinorGrid
	themes.
				     
2004-09-23  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): Get the right kind of size.
	(gog_renderer_gnome_print_measure_text): Use layout method here
	too.

2004-09-22  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): Print using pango layouts.
	Adapted from code by Yaacov Zamir <kzamir@walla.co.il>.

2004-09-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153289
	* graph/gog-axis.c (gog_axis_editor): hide minor tick properties when
	editing discrete axis properties.
	* grah/gog-axis-prefs.glade: name minor tick frame.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* pixmaps: make color order consistent and rerender png from svg with
	inkscape instead of rsvg.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice.c: new GogGridLine type.
	* graph/gog-axis.c (map_discrete_calc_ticks): allways calc major and
	minor ticks.
	(map_linear_calc_ticks): ditto.
	(map_log_calc_ticks): ditto.
	(gog_axis_get_ticks): return tick list and tick number now.
	(gog_axis_view_render): since all ticks are in cache, only draw them
	if they are visibles.
	* graph/gog-grid-line.[ch]: new.
	* graph/gog-grid.c (gog_grid_init_style): use only fill property.
	(role_grid_line_can_add): new.
	(role_grid_x_major_can_add): new.
	(role_grid_x_minor_can_add): new.
	(role_grid_y_major_can_add): new.
	(role_grid_y_minor_can_add): new.
	(role_grid_x_major_post_add): new.
	(role_grid_x_minor_post_add): new.
	(role_grid_y_major_post_add): new.
	(role_grid_y_minor_post_add): new.
	(gog_grid_class_init): register new grid line roles.
	* graph/gog-theme.c: register theme for new grid line objects.
	
2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153146
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_view_render): Check
	if series is valid before trying to render it.

2004-09-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152615
	* pixmaps: new consistent charting icon set (based on a Jimmac work).

2004-09-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar.c (gog_error_bar_get_min_max): get values from
	outside of loop.
	(gog_error_bar_get_bounds): add assertions. Use
	go_data_vector_get_value.

2004-09-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152499
	* graph/gog-error-bar.c (gog_error_bar_get_minmax): check wether
	associated GogSeries is valid.

2004-09-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar.c (gog_error_bar_get_minmax): add assertions.

2004-09-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_map_is_valid): add assertion.

2004-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_element_set_index) : new to handle
	  theming properly.
	(gog_series_element_set_property) : use it here.
	(gog_series_element_init_style) : and here.
	(role_series_element_allocate) : and here.

2004-09-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-renderer-pixbuf.c (gog_renderer_draw_text): remove
	remaining unref.
	
2004-09-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152201
	* graph/gog-axis.c (map_discrete_auto_bound): Set automatic maximum
	number of major and lables to 100.
	(gog_axis_view_render): don't draw axis + ticks in one path.
	* graph/gog-renderer-pixbuf.c: cache pango layout.
	(gog_renderer_pixbuf_get_pango_layout): new.
	(gog_renderer_pixbuf_get_pango_context): new.
	(gog_renderer_pixbuf_push_style): new. unref pango_layout.
	(gog_renderer_pixbuf_push_style): ditto.
				
2004-09-08  Jody Goldberg <jody@gnome.org>

	* Release 1.3.90

2004-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=151530
	tick label truncated by chart outline
	http://bugzilla.gnome.org/show_bug.cgi?id=151527
	pb when exporting to svg a chart without outline
	http://bugzilla.gnome.org/show_bug.cgi?id=127203
	X axis labels centre on chart, not on axis
	
	* graph/goffice-graph.h: new GogViewPadding type.
	* graph/gog-axis.c (map_log_to_canvas): DBL_MIN is not -DBL_MAX.
	(gog_axis_view_padding_request): new.
	(gog_axis_view_size_request): just call gog_view_size_child_request.
	(gog_axis_view_size_allocate): remove.
	(gog_axis_view_render): stop libart path to third element in case of
	  line_width <= 0. Fix label dropping. Use Chart->plot_area for axis
	  drawing.
	* graph/gog-chart.c (gog_chart_view_get_plot_area): new.
	(child_request): new.
	(gog_chart_view_size_allocate): axis now request space around
	  residual. Store residual in Chart->plot_area.
	* graph/gog-label.c (gog_label_view_render): draw rectangle here,
	  since in gog_outlined_object, rectangle around label is clipped to
	  view->allocation.
	* graph/gog-renderer-pixbuf.c (draw_text): don't clip text, to be
	  consistent with svg and gnome-print renderer.
	
2004-09-06  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (go_color_palette_setup) : warning
	  suppression

2004-09-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=151628
	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : hard code the
	  zoom when recalculating the size.  The sample graph is only zoomed
	  when visible.

2004-09-05  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : Add a light bulb
	  to the 'show sample' button to make it stand out a bit more

	* graph/gog-guru.c (graph_guru_type_selector_new) : Make the sample
	  canvas the main resizeable element in the type selector.

2004-09-01  Jody Goldberg <jody@gnome.org>

	* utils/go-gradient.c : conditionalize selector on WITH_GTK
	* utils/go-pattern.c : ditto
	* utils/go-marker.c : conditionalize selector and the use of GdkPixbuf

	* utils/go-color.c : Remove unnecessary include of color-combo
	  and conditionalize the gdk support routines in case we do not have
	  gtk.

2004-09-03  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c
	(gog_series1_5d_populate_editor): Terminate g_object_get call by
	NULL, not 0.

2004-09-02  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_radar/gog-radar-prefs.glade: Someone
	accidentally cut the guts of this.  Add vary-style button that the
	code appears to want.

2004-08-31  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=151529
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): set series to to
	right value for marker drawing.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): use
	right index when walking through path for marker drawing.
								  
2004-08-30  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_new_by_name): Ick.  We need to
	keep a GObject ref in addition to the GnmPlugin ref.

2004-08-29  Jody Goldberg <jody@gnome.org>

	* Release 1.3.2

2004-08-26  Morten Welinder  <terra@gnome.org>

	* goffice.c (libgoffice_shutdown): Showdown plugin services.

	* graph/gog-plot-engine.c (gog_plot_new_by_name): Handle inactive
	plugins.  Mark plugins as used.
	(gog_plugin_services_shutdown): New function.

2004-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : don't leak an axis map for
	  discrete axes

2004-08-24  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_file_split_uris): New function for
	text/uri-list parsing.

2004-08-23  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot-engine.c (create_plot_families): New function.
	(gog_plot_family_by_name, gog_plot_families): Ensure we have
	families.

2004-08-20  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_prefs): Arrange for gui to
	be unref'd.

2004-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (map_linear_calc_ticks): fix tick number
	calculation.
	(overlap): use already defined MAX / MIN.

2004-08-17  Morten Welinder  <terra@gnome.org>

	* goffice.c (libgoffice_init): Call gsf_init.

2004-08-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	don't clip markers to plot area.

2004-08-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (create_invalid_axis_ticks): new.
	(map_[log,discrete,linear]_init): when axis is not valid, init data
	for special invalid axis rendering.
	(map_[log,discrete,linear]_calc_ticks): when axis is not valid, return
	a special set of ticks/labels.
	(gog_axis_map_is_valid): new.
	(gog_axis_map_new): set the map->is_valid flag. Default to FALSE if
	there's no init function.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): use
	gog_axis_map_is_valid.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): idem.
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_view_render): idem.
	Add support for mapping.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): don't clip
	markers to plot area, but to chart area.
							
2004-08-17  Jon K Hellan  <hellan@acm.org>

	* graph/gog-stisyle.c (cb_image_file_select): is_save parameter to
	gui_image_file_select no longer needed.

2004-08-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_editor): don't show preferences for
	circular axis.
	(overlap): new.
	(draw_axis_from_a_to_b): use gog_axis_map and draw labels.
	(gog_axis_view_render): at least width of the '0' char between two
	labels for GOG_AXIS_X.
	* graph/gog-view.h: remove call_parent_render and add a clip flag.
	* graph/gog-chart.c (gog_chart_view_render): removed.
	(gog_chart_view_class_init): set clip to TRUE.
	* graph/gog-outlined-object.c: allways call parent render.
	* graph/gog-renderer-gnome-print.c: change start/stop_clipping to
	clip_push/pop.
	* graph/gog-renderer-svg.c: change start/stop_clipping to
	clip_push/pop.
	(gog_renderer_draw_text): add xml child in current node instead of
	first doc child.
	* graph/gog-renderer-pixbuf: change start/stop_clipping to
	clip_push/pop.
	(gog_renderer_pixbuf_clip_push): add multilevel clipping capability.
	(gog_renderer_pixbuf_print_clip_pop): idem.
	* graph/gog-renderer.c: change start/stop_clipping to clip_push/pop
	and add a clip stack to handle mutilevel clipping.
	* graph/gog-view.c (gog_view_class_init): set default clip flag to
	FALSE.
	(gog_view_render): if klass->clip is TRUE, call to clip_push/pop
	functions.
	* graph/plugins/plot_barcol/gog-barcol.c: set klass->clip to TRUE.
	* graph/plugins/plot_barcol/gog-line.c: idem.
	* graph/plugins/plot_xy/gog-xy.c: idem.
	* graph/plugins/plot_radar/gog-radar.c: idem.

2004-08-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (map_[log,linear,discrete]_init) : add arguments
	for direct mapping to canvas coordinates.
	(gog_axis_map_new) : idem. 
	(map_[log,linear,discrete]_to_canvas : new.
	(gog_axis_map_to_canvas) : new.
	(map_discrete) : handle barcol / area,line correctly.
	(map_log_auto_bounds): be smarter in case of min <= 0.
	(gog_axis_render) : draw axis/ticks in one call. Drop labels when they
	overlap.
	* graph/gog-error-bar.c (gog_error_bar_get_bounds) : return relative
	values of errors instead of absolute values.
	(gog_error_bar_get_min_max) : adapt to new gog_error_bar_get_bounds.
	(gog_error_bar_render) : use gog_axis_map functions.
	* graph/gog-grid.c (gog_grid_render) : remove kludge.
	* grapg/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	add a workaround for a bug in libgnomeprint.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_start_clipping) :
	rendering fix.
	(gog_renderer_pixbuf_line_size) : new.
	(gog_renderer_pixbuf_sharp_path) : new. Tweak a path for sharp
	rendering with libart.
	(gog_renderer_pixbuf_draw_marker) : zoom support for markers. Fix
	marker position.
	* graph/gog-renderer.c (gog_renderer_draw_sharp_path) : new.
	(gog_renderer_draw_sharp_polygon) : new.
	(gog_renderer_line_size) : remove kludge.
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds)
	: maxima = num_elements - 1.
	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : adapt
	to new gog_error_bar_get_bounds.
	(gog_barcol_axis_get_bounds) : new.
	(barcol_draw_rest) : remove kludge.
	(gog_barcol_view_render) : use gog_axis_map functions.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : adapt
	to new gog_error_bar_get_bounds.
	(gog_line_view_render) : use gog_axis_map functions.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_render) : use
	gog_axis_map_to_canvas and new gog_error_bar_get_bounds.
	* utils/go-marker.c (go_marker_get_pixbuf) : add a scale argument.
	
2004-07-29  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_menu_item): Let's initialize item
	before we use it.

2004-07-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis-prefs.glade: HIGification.
	* graph/gog-axis.c (get_adjusted_tick_array): new.
	(map_[discrete,linear,log]_init): new. Init for map functions.
	(map_[discrete,linear,log]): new. Map data to visible plot area.
	(map_[discrete,linear,log]_auto_bound): new. Calculate auto bounds and
	tick spacing.
	(map_[discrete,linear,log]_calc_ticks): new. Calculate position of
	major ticks,minor ticks and labels.
	(gog_axis_map_new),
	(gog_axis_map),
	(gog_axis_map_free): new. For use in plot view rendering functions.
	(gog_axis_set_ticks): new. Put tick and label positions in axis->ticks.
	(gog_axis_auto_bound),
	(gog_axis_calc_ticks): new.
	(gog_axis_set_property): check if update or calc_ticks is needed.
	(gog_axis_update): makes use of gog_axis_set_ticks and
	gog_axis_auto_bound.
	(gog_axis_editor): hide map combobox if axis is discrete.
	(gog_axis_view_render): use axis->ticks for rendering.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): use new map
	functions.					       
	
2004-07-22  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	ppt-parsing-helper.c and ppt-parsing-helper.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c: Handle
	TextBytesAtom and StyleTextPropAtom.

	* libpresent/god-drawing-ms-client-handler-ppt.h: Added parameter
	fonts.

	* libpresent/load-ppt.c: Moved StyleTextPropAtom parsing to
	ppt-parsing-helper.c.

	* libpresent/ppt-parsing-helper.c,
	libpresent/ppt-parsing-helper.h: Moved StyleTextPropAtom parsing
	here.  Improved StyleTextPropAtom parsing.

	* test/dump-ppt-records.c: Improved StyleTextPropAtom parsing.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom), test/dump-ppt-records.c
	(handle_atom): Improved StyleTextPropAtom parsing.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom): Missing NULL.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-drawing-renderer-gdk.c (draw_text),
	drawing/god-paragraph-attributes.c,
	drawing/god-paragraph-attributes.h, libpresent/load-ppt.c: Support
	default paragraph attributes and support bullets and alignment.

	* libpresent/present-view.c: Added space and backspace bindings
	(these don't work since the widget doesn't get focus.)

	* test/dump-ppt-records.c (handle_atom): Handle TxMasterStyleAtom
	better.

	* test/test-view-ppt.c: Added q and escape bindings.

2004-07-19  Jody Goldberg <jody@gnome.org>

	* Release 1.3.1

2004-07-19  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c : switch from inline pixbufs to
	  stock ids.

	* gui-utils/go-action-combo-color.c
	(go_action_combo_color_set_color):  implement

2004-07-13  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom): Parse fonts.

	* test/dump-ppt-records.c (handle_atom): Print a bunch of info
	about default attributes.

2004-07-12  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_info_at_point) :
	  expand this to offer name and override creation.

	* graph/gog-view.c (gog_view_info_at_point) :  expand this interface a
	  bit. I'm still not happy with it.

	* graph/gog-series.c :  keep a sorted list of overrides in place

	* graph/gog-plot.c (gog_plot_foreach_elem) :  handle point overrides

	* graph/gog-object.c (gog_object_emit_changed) :  handle updates for
	  objects not yet connected to parents.

2004-07-11  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-default-attributes.c and god-default-attributes.h.

	* drawing/god-default-attributes.c,
	drawing/god-default-attributes.h: Default pango and paragraph
	attributes per indent level.

	* drawing/god-drawing-renderer-gdk.c: Handle default attributes.
	Rework character attributes.

	* drawing/god-text-model.c, drawing/god-text-model.h: Added indent
	and default attributes concepts.

	* libpresent/load-ppt.c (handle_atom): Parse TxMasterStyleAtom.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added a default default
	attributes object per text type.

	* libpresent/present-text.c: Added a property to store a pointer
	to the main presentation object.

	* test/dump-ppt-records.c: Parse TxMasterStyleAtom.

2004-07-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_canvas_select_item) : handle the zoom

	* graph/gog-theme.c (gog_themes_init) : Add a global alias for
	  GogSeriesElement -> GogSeries
	(gog_theme_find_element) : Look up theme local and global aliases for
	  classes.
	(gog_theme_add_alias) : new.

2004-07-08  Jody Goldberg <jody@gnome.org>

	* goffice.c (libgoffice_init) : Add SeriesElement to be pedantic

2004-07-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-graph.c (gog_graph_init) : apply theme style for graphs
	  to do a full init.

2004-07-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) :
	    initialize the style completely using the theme when we have a
	    theme.

2004-07-04  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-drawing-renderer-gdk.c (draw_text): Handle
	char_attributes.

	* drawing/god-text-model.c, drawing/god-text-model.h
	(real_god_text_model_set_paragraph_attributes): Fixed up this
	function a bit.
	(real_god_text_model_set_pango_attributes): Implemented this
	function.  Changed it to take GList instead of PangoAttrList.

	* libpresent/load-ppt.c (handle_atom): Implemented parsing
	character attributes.

2004-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (map_area_series_solid_default) : simplify now
	  that we're just filling in the color no need to twiddle types

	* graph/gog-style.c : rework GogStyle::fill share pattern:fore/back
	and gradient:start/end.
	merge all the different auto flags.  
	initialize the gradient brightness to -1 to avoid starting with black
	Change fill from union to struct to simplify changing fill types
	Allow themed gradient fills

2004-06-30  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-text-model.c
	(real_god_text_model_set_paragraph_attributes): Oh yeah, the
	character count should increase as you iterate through the
	paragraph.

	* libpresent/load-ppt.c (handle_atom): Pass in the position in the
	text instead of the position in the file.  That might be a good
	idea.

2004-06-29  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-paragraph-attributes.c and god-paragraph-attributes.h.

	* drawing/god-drawing-renderer-gdk.c (draw_text): Draw each
	paragraph separately with some paragraph formatting.

	* drawing/god-paragraph-attributes.c,
	drawing/god-paragraph-attributes.h: New file to handle attributes
	of a paragraph.

	* drawing/god-text-model.c, drawing/god-text-model.h: Store as a
	list of paragraphs.  Store some formatting information.

	* libpresent/load-ppt.c: Load some of the paragraph formatting
	from ppt.

	* test/dump-ppt-records: Attempted to parse BaseTextPropAtom.

	* test/test-view-ppt.c (main): Fullscreen the window.

2004-06-23  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* Makefile.am: Added cut-n-paste subdir.
	* cut-n-paste/Makefile.am: New file.
	* cut-n-paste/pcre/Makefile.am: pcre tree moved from gnumeric.
	* cut-n-paste/pcre/get.c: (pcre_get_stringnumber),
	(pcre_copy_substring), (pcre_copy_named_substring),
	(pcre_get_substring_list), (pcre_free_substring_list),
	(pcre_get_substring), (pcre_get_named_substring),
	(pcre_free_substring): ditto, changed gnumeric_* to go_*
	* cut-n-paste/pcre/internal.h: ditto.
	* cut-n-paste/pcre/maketables.c: (pcre_maketables): ditto.
	* cut-n-paste/pcre/pcre.c: (make_pcre_default_tables), (ord2utf8),
	(pcre_version), (pcre_info), (pcre_fullinfo), (pcre_config),
	(pchars), (check_escape), (is_counted_repeat),
	(read_repeat_counts), (first_significant_code), (find_fixedlength),
	(find_bracket), (find_recurse), (could_be_empty_branch),
	(could_be_empty), (check_posix_syntax), (check_posix_name),
	(adjust_recurse), (compile_branch), (compile_regex), (is_anchored),
	(is_startline), (find_firstassertedchar), (valid_utf8),
	(pcre_compile), (match_ref), (match_xclass), (match), (pcre_exec):
	* cut-n-paste/pcre/pcre.h: ditto.
	* cut-n-paste/pcre/pcreposix.c: (pcre_posix_error_code),
	(go_regerror), (go_regfree), (go_regcomp), (go_regexec):
	* cut-n-paste/pcre/pcreposix.h: ditto.
	* cut-n-paste/pcre/printint.c: (print_char), (print_internals): ditto.
	* cut-n-paste/pcre/study.c: (set_bit), (set_start_bits),
	(pcre_study): ditto.
	* goffice.c: (libgoffice_init): Added call to go_math_init.
	* graph/go-data-simple.c: (go_data_scalar_str_get_value),
	(go_data_vector_str_get_value),
	(go_data_vector_str_set_translation_domain): use new go_nan and functions in utils/go-math.*
	* graph/go-data.c: (go_data_vector_get_value): ditto.
	* graph/gog-axis.c: (gog_axis_get_entry), (gog_axis_update),
	(cb_enable_dim), (cb_axis_bound_changed), (gog_axis_get_bounds),
	(gog_axis_num_markers), (gog_axis_view_render): ditto.
	* graph/gog-error-bar.c: (gog_error_bar_get_bounds): ditto.
	* graph/gog-plot.c: (gog_plot_get_axis_bounds): ditto.
	* graph/plugins/plot_barcol/gog-1.5d.c:
	(gog_plot1_5d_axis_get_bounds): ditto.
	* graph/plugins/plot_barcol/gog-barcol.c:
	(gog_barcol_update_stacked_and_percentage),
	(gog_barcol_view_render): ditto.
	* graph/plugins/plot_barcol/gog-line.c:
	(gog_line_update_stacked_and_percentage), (gog_line_view_render): ditto.
	* graph/plugins/plot_pie/gog-pie.c: (gog_pie_view_render),
	(gog_pie_series_update): ditto.
	* graph/plugins/plot_radar/gog-radar.c:
	(gog_radar_plot_axis_get_bounds), (gog_radar_view_render):
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update),
	(gog_2d_plot_axis_get_bounds), (gog_xy_view_render): ditto.
	* utils/go-marker.c: ditto.
	* utils/Makefile.am: Added go_math.[c,h]
	* utils/go-math.c: (go_math_init), (go_add_epsilon),
	(go_sub_epsilon), (go_fake_floor), (go_fake_trunc): imported from gnumeric.
	* utils/go-math.h: ditto.

2004-06-20  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : Ensure that the line
	  extends out far enough for the first and last tick.

	* graph/gog-theme.c (map_area_series_solid_default) : honour the new
	  disable_theming flag.
	* graph/gog-style.c (gog_style_is_completely_auto) : new.

2004-06-16  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_filename_to_uri): Handle "//" and "/./"
	parts in filenames.

	* graph/gog-style.c (cb_image_file_select): Handle change in
	gui_image_file_select's signature.  (Barely.)

	* utils/go-file.c (go_file_create): New function.

2004-06-15  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_basename_from_uri): Better WITH_GNOME
	implementation that handles fragments and methods.

2004-06-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c : tack on a placeholder 'in_3d'
	  attribute to simplify roundtripping for xls.

2004-06-11  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c: New file.

2004-06-11  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis-prefs.glade : add a combobox for map selection.
	* graph/gog-axis.c : add a map description structure. remove log_scale
	boolean property of GogAxis, and add a new named map property.
	(map_init_linear),
	(map_linear),
	(map_init_log),
	(map_log),
	(gog_axis_map_set_by_num),
	(gog_axis_map_populate_combo),
	(gog_axis_map_set),
	(gog_axis_map_init),
	(gog_axis_map),
	(gog_axis_map_destroy) : new.
	(gog_axis_editor) : handle map combobox.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : use map
	functions.
	
2004-06-05  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_get_entry) : add some protection now that
	  this is public.
	  (gog_axis_is_discrete) : ditto.

	* graph/gog-style.c : add sax exporters
	* graph/gog-error-bar.c : ditto

	* graph/gog-object-xml.h : s/GogPersistDOM/GogPersist
	* graph/gog-object-xml.c : add sax exporters
	  (go_xml_out_add_color) : new.

	* utils/go-font.c : Added some conditional leak debug tools

2004-06-01  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (go_combo_text_set_text): Plug leak.

2004-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_find_child_view) : new

2004-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_get_plot) : new.

	* graph/gog-axis.c (gog_axis_get_entry) : rename from axis_get_entry
	  and make public.

2004-05-24  Jody Goldberg <jody@gnome.org>

	* graph/go-data-simple.c (go_data_vector_str_get_str) : enable the
	  translation mechanism

2004-05-26  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* gui-utils/Makefile.am: added go-combo-text.h
	* gui-utils/go-action-combo-text.c: (cb_entry_changed),
	(go_action_combo_create_tool_item),
	(go_action_combo_text_set_entry):
	* gui-utils/go-combo-text.h: was gnumeric-combo-text.h
	* gui-utils/go-combo-text.c: was gnumeric-combo-text.c,
	replaced GtkList by GtkTreeView
	* gui-utils/go-marshalers.list: added BOOLEAN:POINTER

2004-05-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-chart.c (gog_chart_view_class_init) : set call_parent_render
	to FALSE.
	* graph/gog-outlined-object.c (gog_outlined_view_render) : call parent
	render method only if call_parent_render is TRUE;
	(gog_outlined_view_class_init) : set call_parent_render to TRUE;
	* graph/gog-outlined-object.h : add a call_parent_render boolean.

2004-05-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=142212
	* graph/plugins/plot-barcol/gog-line.c (gog_line_view_render) : don't
	use '0' if Y value is missing.
	
2004-05-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_measure_text) : use
	  logical rather than ink extents.
	(gog_renderer_pixbuf_draw_text) : ditto.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : ditto.
	(gog_renderer_pixbuf_draw_text) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : tick labels for
	  discrete axes are below the line not the major tick marks.
	(gog_axis_view_render) : ditto

	* graph/gog-renderer-svg.c (make_layout) : cache the context.
	(gog_renderer_pixbuf_finalize) : unref cached contexts.
	(gog_renderer_pixbuf_class_init) : connect the new finalize.

	* graph/gog-style.c (gog_style_is_different_size) : line width change
	  for axis changes size.

	* graph/gog-axis.c (gog_axis_view_render) : don't allocate size for
	  ticks if the lines are invisible.

	* graph/gog-plot.c (gog_plot_get_axis_bounds) : add some safety.
          This will be called for things like a pie when adding one while
	  something with an still exists.

	* graph/gog-guru.c (cb_attr_tree_selection_change) : be more forgiving
	  about when a user can go back to select a plot.  If there is only
	  one chart, or one plot things are unambiguous.

	* drawing/god-property-table.h : sync with the extensions in the xls
	  importer to handle gradients and richtext.

	* drawing/god-property-table.c (god_property_table_get_markup) : new.
	(god_property_table_set_markup) : ditto.

2004-05-11  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-pixbuf.c: (make_layout),
	(gog_renderer_pixbuf_update): replaced deprecated pango_ft2_get_context.
	* graph/gog-renderer-svg.c: (make_layout): ditto.
	* graph/gog-style-prefs.glade: replaced GtkOptionMenu by GtkComboBox.
	* graph/gog-style.c: (cb_gradient_style_changed),
	(fill_gradient_init), (cb_image_style_changed), (fill_image_init),
	(cb_fill_type_changed), (fill_init): ditto.

2004-05-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_foreach_elem) : pass the index of the
	  iteration, not the absolute for has-legend situations

	* graph/gog-series.c (gog_series_set_property) : update cardinality if
	  has-legend changes.
	(gog_series_editor) : Add a quick 'show in legend' toggle

2004-05-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : sync the default theme with
	  XL's notion of things so that we do not theme away auto settings on
	  import.  Specificly Give chart's the background and make graph
	  empty.

	*  */Makefile.am : use goffice.mk for include paths

2004-05-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=136363
	* graph/gog-style.c (gog_style_apply_theme) : Do not theme the fonts
	  it over rides the user selection because there is no 'auto' flag.

2004-05-06  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_dir_from_str,
	go_gradient_dir_as_str): Use G_N_ELEMENTS.
	(grad_dir_names[]): Constify.
	(go_gradient_selector): Eliminate elements table.

2004-04-29  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=141405
	* drawing/god-drawing-renderer-gdk.c
	(god_drawing_renderer_gdk_render_shape) : explicitly set alignment for
	  now.  Set layout bounds so that we wrap.

2004-04-19  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=127411
	* graph/gog-chart.c (gog_chart_view_render) : render the style.

2004-04-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_bubble_plot_class_init) : Do not
	  replicate ms dim types.  That breaks xls import.
	(gog_xy_plot_class_init) : ditto.
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_class_init) : ditto

2004-04-15  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_prefs): Look for pixmaps in
	the right directory.

2004-04-08  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_plot1_5d_axis_get_bounds), (gog_plot1_5d_class_init),
	(gog_series1_5d_set_property), (gog_series1_5d_get_property),
	(gog_series1_5d_populate_editor), (gog_series1_5d_class_init),
	(gog_series1_5d_init): Add error bars support.
	* graph/plugins/plot_barcol/gog-1.5d.h: ditto.
	* graph/plugins/plot_barcol/gog-barcol.c: ditto.
	(gog_barcol_update_stacked_and_percentage),
	(gog_barcol_view_render): ditto.
	* graph/plugins/plot_barcol/gog-line.c: ditto.
	(gog_line_update_stacked_and_percentage), (gog_line_view_render): ditto.
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update): use gog_error_bar_is_visible instead
	of detailed tests.

2004-04-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=139205
	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_menu_item) : There's no reason to set a
	  default label not only was it ugly, but it disabled the nice utility
	  code in GtkAction::connect_proxy that would set 'use_underline' for us

2004-03-30  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=138532
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_plot_update) : don't
	  use an invalid series for anything.

2004-03-28  Jody Goldberg <jody@gnome.org>

	* Release 1.3.0

2004-03-26  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-drawing-renderer-gdk.c, god-drawing-renderer-gdk.h,
	god-drawing-view.c, and god-drawing-view.h.

	* drawing/god-drawing-renderer-gdk.c,
	drawing/god-drawing-renderer-gdk.h: New class.  Renders a drawing
	to a gdk drawable.

	* drawing/god-drawing-view.c, god-drawing-view.h: New class.
	Widget to display a drawing.

	* drawing/god-drawing.c, drawing/god-drawing.h: Added a background
	shape.

	* drawing/god-image.c: Call gdk_pixbuf_loader_close.

	* drawing/god-property-table.c, drawing/god-property-table.h:
	Added length type and fixed up flag type.  Added a bunch of types.

	* drawing/god-shape.c: Allow a NULL anchor.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	present-view.c and present-view.h.

	* libpresent/load-ppt.c: Handle the DocumentAtom.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added extents and notes_extents
	fields.

	* libpresent/present-view.c, libpresent/present-view.h: New class.
	Widget to display a presentation.

	* ms-compat/god-image-ms.c: Added a bunch of EscherOPT fields.
	Handle the patriarch and background shapes more cleanly.

	* test/.cvsignore: Added test-view-ppt.

	* test/Makefile.am (test_view_ppt_SOURCES): Added test-view-ppt.c.

	* test/test-ppt.c: Handle the separate patriarch and background
	shapes.

	* test/test-view-ppt.c: New Class.  Tests present-view.c.

	* utils/go-units.h: Added new unit EMU.  (360000 EMUs per
	centimeter, 914400 EMUs per inch, 12700 EMUs per point.)

2004-03-22  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-image.c, god-image.h, god-image-store.c, and
	god-image-store.h.

	* drawing/god-drawing-group.c, drawing/god-drawing-group.h: Added
	an image store to the drawing group.  Implemented
	god_drawing_group_new.

	* drawing/god-drawing.c, drawing/god-drawing.h: Gave each drawing
	a link to its drawing group.

	* drawing/god-image-store.c, drawing/god-image-store.h: New class.
	An array of images.

	* drawing/god-image.c, drawing/god-image.h: An image or a
	placeholder for an image.  Includes the original data as well as a
	loaded pixbuf.

	* libpresent/load-ppt.c: Actually store the drawings in the slides
	and the drawing groups in the presentations.  Load the pictures
	into the drawing group.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added a drawing group here.

	* libpresent/present-slide.c, libpresent/present-slide.h: Added a
	drawing here.

	* ms-compat/Makefile.am (libgoffice_ms_compat_la_SOURCES): Added
	god-image-ms.c and god-image-ms.h.

	* ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h: Actually
	do drawing group loads and load up the image store as we go.
	Added a function to handle parsing of images not in the main
	Escher stream.

	* ms-compat/god-image-ms.c, ms-compat/god-image-ms.h: New class.
	Just a god_image with a hash that's used at load time.

	* test/test-ppt.c: Moved dumping the Drawings here since they're
	included in the slides now so it makes more sense to dump them
	here than in load-ppt.c.

2004-03-22  Morten Welinder  <terra@gnome.org>

	* libpresent/load-ppt.c (handle_atom): The usual fix.

2004-03-21  Christopher James Lahey  <clahey@ximian.com>

	* ms-compat/god-drawing-ms.c (handle_atom),
	test/dump-ppt-records.c (handle_atom): Moved some of the debugging
	stuff from god-drawing-ms to dump-ppt-records.

2004-03-20  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-anchor.c (god_anchor_finalize),
	ms-compat/god-drawing-ms-client-handler.c
	(god_drawing_ms_client_handler_finalize): Chain the finalize
	function.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	present-presentation.c, present-presentation.h, present-slide.c,
	present-slide.h, present-text.c, present-text.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c,
	libpresent/god-drawing-ms-client-handler-ppt.h: Add a PresentSlide
	so that we can parse OutlineTextRefAtom and link it up to the
	outline.

	* libpresent/load-ppt.c, libpresent/load-ppt.h: Changed it to use
	PresentPresentation.  Pass a PresentSlide into the client_handler
	if the PPDrawing is a child of a Slide.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h, libpresent/present-slide.c,
	libpresent/present-slide.h, libpresent/present-text.c,
	libpresent/present-text.h: New classes.  A presentation, a slide,
	and a piece of text on a slide.

	* test/test-ppt.c: Changed this to use PresentPresentation.

2004-03-19  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/god-drawing-ms-client-handler-ppt.c
	(god_drawing_ms_client_handler_ppt_handle_client_text): Handles
	simple cases with text inside of a shape in Escher.

	* libpresent/load-ppt.c (dump_shape): Print text if there is any.

	* ms-compat/go-ms-parser.c (go_ms_parser_read): Only read the data
	if there's a handler.

	* ms-compat/god-drawing-ms-client-handler.c,
	ms-compat/god-drawing-ms-client-handler.h: Make it so subclasses
	can specify whether they want the super class to read the data
	from the input stream.

	* ms-compat/god-drawing-ms.c (handle_atom): Handle
	EscherClientTextbox by calling the client handler.

2004-03-18  Christopher James Lahey  <clahey@ximian.com>

	* ms-compat/go-ms-parser.c, ms-compat/go-ms-parser.h
	(go_ms_parser_read): Included the record type as a field in the
	record structure.

	* test/.cvsignore, test/Makefile.am: Added dump-ppt-records.

	* test/dump-ppt-records.c: New test app to list all the records in
	a ppt file.

2004-03-18  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-shape.c, drawing/god-shape.h: Each shape has an
	anchor.  Added functions to get the children of a shape.

	* graph/gog-legend.c (gog_legend_init),
	graph/gog-outlined-object.c (gog_outlined_object_init),
	graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update),
	graph/gog-renderer-svg.c (make_layout), graph/gog-renderer.c
	(gog_renderer_init): Cast to double before calling
	GO_.._TO_.. unit conversion functions.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	god-drawing-ms-client-handler-ppt.c and
	god-drawing-ms-client-handler-ppt.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c,
	libpresent/god-drawing-ms-client-handler-ppt.h: New class.
	Handles client functions for PPT.

	* libpresent/load-ppt.c: Added #include <gnumeric-config.h>.
	Created a GodDrawingMsClientHandlerPpt for use in parsing.  Added
	code to dump the Escher drawing for testing purposes.

	* ms-compat/Makefile.am (libgoffice_ms_compat_la_SOURCES): Added
	god-drawing-ms-client-handler.c and
	god-drawing-ms-client-handler.h.

	* ms-compat/god-drawing-ms-client-handler.c,
	ms-compat/god-drawing-ms-client-handler.h: New class.  Allows
	Escher parser to let the host application handle Client records.

	* ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h: Use
	GodDrawingMsClientHandler to parse EscherClientAnchor records.

	* test/.cvsignore: Ignore test-ppt.

	* test/test-ppt.c: Fixed include here.  Added #include
	<gnumeric-config.h>

	* utils/go-unit.h: Changed these to use the math in whatever type
	the input is.  If you pass a double, it uses double math.  If you
	pass an integer type, it uses integer math.

2004-03-18  Morten Welinder  <terra@gnome.org>

	* libpresent/*.h: Add header guards.

2004-03-16  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS): Added libpresent and test.

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-anchor.c and god-anchor.h.

	* drawing/Makefile.am, drawing/god-drawing-group.c,
	drawing/god-drawing.c, drawing/god-drawing.h,
	drawing/god-property-table.c, drawing/god-shape.c,
	drawing/god-shape.h, drawing/god-text-model.c,
	ms-compat/Makefile.am, ms-compat/go-ms-parser.c,
	ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h:
	Standardized #include lines.

	* utils/go-units.h: Added an underlying unit and added a type for
	storing lengths.  Added point and rect types.

2004-03-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar-prefs.glade: Don't start visible.

2004-03-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_persist_dom_save): Constify
	and avoid errors.

	* graph/gog-graph.c (gog_graph_validate_chart_layout): Initialize
	graph.

	* drawing/god-property-table.c (god_property_table_finalize): Chain up.
	* drawing/god-shape.c (god_shape_dispose): Chain up.
	* drawing/god-text-model.c (god_text_model_finalize): Chain up.
	* drawing/god-drawing-group.c (god_drawing_group_finalize): Chain
	up.

	* gui-utils/go-action-combo-text.c
	(go_tool_combo_text_finalize): Add dummy chain.

	* graph/plugins/plot_xy/gog-xy.c (gog_2d_plot_update): Initialize
	series.
	(gog_xy_series_finalize, gog_2d_finalize): Skip pointless tests.

2004-03-16  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* Makefile.am: restore data subdir
	* data/Makefile.am: add error bars icons
	*data/bar-*.png: new icons for error bars editor.
	* goffice.c: (libgoffice_init): add GOD_ERROR_BAR_TYPE
	* graph/Makefile.am: add gog-error-bar.*
	* graph/goffice-graph.h: add GogErrorBar struct
	* graph/gog-object-xml.c: (gog_object_write_property):
	set success to FLASE when the object does not exist.
	* graph/gog-series-impl.h: add populate_editor in GogSeriesClass
	* graph/gog-series.c: (gog_series_editor): add pages for error bars.
	* graph/gog-error-bar-prefs.glade:
	* graph/gog-error-bar.[c,h]: new files.
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update),
	(gog_xy_plot_class_init), (gog_bubble_plot_class_init),
	(gog_xy_view_render), (gog_xy_series_init),
	(gog_xy_series_finalize), (gog_xy_series_set_property),
	(gog_xy_series_get_property), (gog_xy_series_populate_editor),
	(gog_xy_series_class_init): add support for error bars.

2004-03-15  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-box.c (go_combo_box_destroy): Plug leaks.

2004-03-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=135621
	* graph/gog-axis.c (gog_axis_render) : fix rounding issue.
	
2004-03-07  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_radar/gog-radar.c (gog_radar_plot_type_name) :
	  remove the starting angle pref.  That is better handled by the axis.

2004-03-13  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_series_update), (gog_xy_series_init_style): fixed tests about bubble plots.

2004-03-13  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS): Added drawing and ms-compat.
	(libgoffice_la_LIBADD): Added drawing/libgoffice-drawing.la and
	ms-compat/libgoffice/ms-compat.la.

2004-03-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_element_class_init): Apply the
	usual fix.

2004-03-11  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_xy/gog-xy.c : draw markers when they are in plot
	area and a margin half marker size wide (partly fix 135621).
	
2004-03-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-object.c : make use_parent_as_proxy a class property
	instead of an instance one.
	* graph/gog-style.c : defines a new GogStyledObject derived
	GogSeriesElement object for storing of single element style overrides.
	(gog_series_class_init) : declares a new GogObjectRole for use of
	GogSeriesElement objects. Set use_parent_as_proxy as true.
	(gog_series_get_elements) : returns the GList of GogSeriesElement
	children of GogSeries.
	(gog_series_get_valid_element_index) : returns the next or previous
	index which is not already used by a GogSeriesElement children of
	GogSeries.
	* graph/gog-style.c : remove unused implementation of
	GogStyleExtension and old gog_series_element_style code.
	(gog_style_editor) : remove code related to GogStyleExtension.
	(gog_style_assing) : idem.
	(gog_style_persist_dom_load) : idem.
	(gog_style_persist_dom_save) : idem.
	* graph/gog-syled-object.c (gog_styled_object_set_property) : use of
	gog_styled_object_set_style.
	(gog_styled_object_set_style)  : new.
	* graph/plugins/plot_pie/gog-pie-series-element-prefs.glade : new.
	* graph/plugins/plot_pie/gog-pie-prefs.c (gog_pie_series_element_pref)
	: new.
	* graph/plugins/plot_pie/gog-pie.c : define a new GogSeriesElement
	derived GogPieSeriesElement object for storage of separation and style
	of single elements.
	(gog_pie_view_render) : handle single element style overrides.
	* graph/plugins/plot_pie/gog-ring-prefs.glade : fix climb_rate, digits
	and adjustment properties of the separation spin_button.
	
2004-03-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=136088
	* graph/gog-object-xml.c (gog_object_write_property) : Add a
	  GOG_PARAM_FORCE_SAVE to save a parameter even if the value is the
	  same as the default.
	* graph/gog-plot.c (gog_plot_class_init) : Use it here to always store
	  the vary_style_by_element property.

2004-02-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (map_area_series_solid_default) : don't set colors
	  for image fills.
	(map_area_series_solid_guppi) : ditto.

2004-02-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_radar/gog-radar.c : use
	  'default-style-has-markers' rather than 'markers' to be consistent.
	(gog_radar_plot_update) : store the minima and maxima from all the
	  series.
	(gog_radar_plot_axis_get_bounds) : renamed from gog_radar_plot_axis_bounds 
	  for consistency.  Set the bounds for a radial axis more generally.
	  We want the outbound to be hard (unscaled) and the inner rounded.

2004-02-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_size_allocate) : only position th
	  axis, not all the children.

	* graph/plugins/plot_radar/gog-radar.c
	(gog_radar_view_render_series) : Just alloca the max numbr of points
	  aka model::num_elements, and don't free alloca-ed memory.

2004-02-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_radar/gog-radar.c 
	(gog_plot_radar_render_series) : use g_new instead of g_alloca for
	allocation of path.
	
2004-02-21  Jody Goldberg <jody@gnome.org>

	* utils/go-locale.c : Some cut-n-paste for the without_gnome case

	* gui-utils/go-action-combo-text.c : some initial implementation

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle mismatched numbers of elements and labels.
	(gog_pie_view_render) : take the outline into account when sizing.

	* graph/gog-style.h : add weak notion of centered image.  This needs
	  to be stronger to specify alignement.

	* graph/gog-style.c (gog_style_set_fill_image_filename) : new.
	(cb_image_file_select) : Use it.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) :
	supported centered images.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : support centered images.

	* graph/gog-object.c (gog_object_get_children) : add a filter parm.
	(gog_object_get_child_by_role) : new utility routine.

	* graph/gog-legend.c (gog_legend_update) : set up the editor properly
	  for fonts.

	* graph/gog-graph.c (gog_graph_view_size_allocate) : typo.  Only
	  effected manually created plots

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : make
	  more resistent to out of memory situations.

	* graph/go-data-simple.c : Add some quick and dirty constant vectors
	  for double [], and char const *[].  These could certainly be more
	  robust.

	From Michael Devine <mdevine@cs.stanford.edu> :
	* graph/goffice-graph.h : Add a first pass at 'radar' plots
	* graph/gog-axis.c : ditto.
	* goffice/graph/gog-chart.c : ditto

2004-02-13  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (gog_style_extension_editor): Fix declaration
	and check order.

2004-02-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.[ch] : new GogStyleExtension object.
	(gog_style_assign) : handle extension.
	(gog_style_editor) : shows extension editor if it exists.
	(gog_style_get_extension) : new.
	(gog_style_set_extension) : new.
	* graph/gog-series : add a new style_extension_type field in
	GogSeriesDesc, and use it in gog_series_init_style.
	
2004-02-09  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-bubble-prefs.glade: Do not start
	visible.

2004-02-09  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render): replaced
	test series.num_dim == 3 by GOG_IS_BUBBLE_PLOT
	* graph/plugins/plot_xy/gog-xy.h: fixed GOG_IS_BUBBLE_PLOT

2004-02-04  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (cb_menu_custom_activate) : don't show
	  until after the signal in case a handler is marking the dialog as a
	  transient.
	(cb_combo_custom_clicked) : ditto.

2004-02-02  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: fixed several warnings

2004-02-02  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-combo-color.c (cb_preview_clicked) : return the real
	  is_custom state.

	* gui-utils/go-color-palette.c (handle_color_sel) : simplify and just
	  return the color caller can emit the signal, and store the new
	  colour.
	(cb_combo_custom_response) : store results.
	(cb_menu_default_activate) : ditto.
	(cb_menu_color_activate) : ditto.
	(cb_menu_custom_response) : ditto.
	(set_color) : store when something is a custom of default.
	(go_color_palette_get_current_color) : return a flag indicating if
	  this is custom.

2004-02-01  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (handle_color_sel) : destroy before we
	  emit in case the custom dialog handler played with the wrapper
	  actions (eg desensitized them)

	* gui-utils/go-combo-color.c (cb_proxy_custom_dialog) : pop the combo
	  down when the custom dialog goes up.

2004-01-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_gradient_type_changed) : store the last
	  selected type.
	(populate_gradient_combo) : default to that when changing fill type to
	  gradient.

	* graph/gog-style-prefs.glade : fix mnemonics to not clash.

	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item) : patch leak

	* utils/go-marker.c (go_marker_selector) :
	  go_combo_pixmaps_add_element absorbs a ref to the pixbuf, don't lose
	  control of it.  Handle shape=none nicely too.

2004-01-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): Attempt
	fix.

2004-01-28  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_xy/gog-xy.c: fix 2 syntax errors to make it
	  compile

2004-01-28  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/Makefile.am:
	* graph/plugins/plot_xy/gog-bubble-prefs.glade:
	* graph/plugins/plot_xy/gog-bubble-prefs.c:
	* graph/plugins/plot_xy/gog-xy.c:
	* graph/plugins/plot_xy/gog-xy.h:
		added support for bubble plots options

2004-01-24  Jon K Hellan  <hellan@acm.org>

	* gui-utils/go-dock.c (go_dock_class_init): Initialize parent_class.

	* gui-utils/go-dock-item.c (go_dock_item_class_init): Ditto.

	* gui-utils/go-dock-band.c (go_dock_band_class_init): Ditto.

2004-01-24  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : suppress warning

	* gui-utils/go-action-combo-text.c (go_action_combo_text_set_entry) :
	  implement.

	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item) : set the relief here too.
	  We're close to having a GOActionCombo base for this.

2004-01-23  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-stack.c : tweak to make it sorta work.
	  I do not like the kludgy approach required by our not supporting
	  arguments to GtkAction::activate

2004-01-22  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c : rewrite.

2004-01-17  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-color.c (cb_color_changed) : Use the
	  supplied color directly.
	(go_action_combo_color_create_menu_item) : connect up the activate signal.

2004-01-22 Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/gog-style.c (gog_style_editor) : edit a GogStyle, not
	GogStyledObject.
	(gog_styled_object_editor) : new.
	* graph/gog-axis.c : use gog_styled_object_editor instead of
	gog_style_editor.
	* graph/gog-label.c : ditto.
	* graph/gog-series.c : ditto.
	* graph/gog-styled-object.c : ditto. rename gog_styled_object_editor
	to styled_object_editor.

2004-01-17 Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/plugins/plot_xy/* : add initial support for bubble plots

2004-01-16  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-stack.c (go_action_combo_stack_push) :
	  operate on the combo, not the toolitem wrapper.
	(go_action_combo_stack_pop) : ditto.
	(go_action_combo_stack_truncate) : ditto.

2004-01-16  Jon K Hellan  <hellan@acm.org>

	* gui-utils/go-action-combo-stack.c (go_action_combo_stack_push) 
	(go_action_combo_stack_pop): Fix typos.

2004-01-14  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-color.c
	(go_action_combo_color_create_menu_item) : some initial work on
	  producing a menu.  Its not bad, but the combo needs alot of cleanup
	  before it can migrate.

2003-12-23  Jody Goldberg <jody@gnome.org>

	* Release 1.2.3

2003-12-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : set the current format.

2003-12-19  Jody Goldberg <jody@gnome.org>

	* utils/go-format.c (go_format_eq) : new.
	(go_format_as_XL) : new
	(go_format_new_from_XL) : new

	* graph/gog-axis.c (gog_axis_editor) : add a format selection page for
	  non-discrete axis.

2003-12-18  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=129445
	* graph/gog-style.c (gog_style_assign) : transfer the
	  needs_obj_defaults field.
	(gog_style_init) : init needs_obj_defaults field to TRUE.
	(gog_style_persist_dom_load) : persisted styles do not need object
	  defaults.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_series_init_style) :
	  respect the needs_obj_defaults.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_series_init_style) : ditto.

	* graph/gog-axis.c (gog_axis_get_marker) : Use go_format to handle the
	  markers.

	* utils/go-format.c : A quick cheesy wrapper to GnmFormat in
	  preparation for sucking it down here.

2003-12-14  Jody Goldberg <jody@gnome.org>

	* utils/go-pattern.c (go_pattern_selector) : fix leak.
	* utils/go-gradient.c (go_gradient_selector) : fix leak.
	* utils/go-marker.c (go_marker_selector) : fix leak.

2003-12-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=128874
	* graph/gog-axis.c (gog_axis_finalize) : unref labels.
	(gog_axis_update) : ref them here.

2003-11-26  Jody Goldberg <jody@gnome.org>

	* Release 1.2.2

2003-11-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : dup the
	  style to avoid themes stomping on shared styles.  refcounting is not
	  an ideal semantic for GogStyle.

2003-11-17  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property): Plug leak.

2003-11-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : support minor ticks and
	  tune placement to work around anti-aliasing blur.

	* graph/gog-grid.c (gog_grid_view_render) : tune the cheat to work
	  around anti-aliasing blur.

2003-11-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=126775
	* graph/gog-axis.c (gog_axis_update) : be smarter when min == max.

2003-11-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_obj_children_reordered) : implement.
	(cb_reordered_find) : new.

	* graph/gog-object.c (gog_object_can_reorder) : implement.

2003-11-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  avoid the potential for trouble for a series with only zeros.

2003-11-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_init_format_page) : store the
	  precedence widgets.
	(cb_attr_tree_selection_change) : adjust sensitivity of the precedence
	  elements.

2003-11-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (marker_init) : fix leak.

	* graph/gog-guru.c (cb_attr_tree_selection_change) : work around a
	  probable bug in GtkViewport by adding an extra GtkFrame inside the
	  viewport and using that.

2003-11-11  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): Use finite
	consistently.

2003-11-11  Jody Goldberg <jody@gnome.org>

	* utils/go-pattern.c (go_pattern_selector) : add auto support.

	* utils/go-marker.c : move the default handling where it belongs.

	* utils/go-color.c (go_color_to_gdk) : new.

	* graph/plugins/plot_barcol/plot-types.xml.in : include non-marker
	  variants.
	* graph/plugins/plot_xy/plot-types.xml.in : include non-marker, and
	 barcol non-line variants.

	* graph/gog-theme.c : respect the auto flags here.

	* graph/gog-styled-object.c (gog_styled_object_apply_theme) : new.
	(gog_styled_object_set_property) : Use it here.
	(gog_styled_object_parent_changed) : and here.
	(gog_styled_object_editor) : provide a default impl.
	(gog_styled_object_get_auto_style) : new.

	* graph/gog-style.c :
	    - Add support for auto* flags for the marker here, not GoMarker.
	    - Support restoring auto for shapes and colours

	* graph/gog-series.c (gog_series_init_style) : new.  Gives us finer
	  control of what is themable.

	* graph/gog-guru.c : Simplify our lives and only have 1 prop sheet at
	  any given time.  No need to worry about updating when something
	  changes externally (styles or dimensions)

	* graph/gog-chart.c : Use the default editor and init_style
	* graph/gog-graph.c : ditto

	* graph/gog-axis.c : convert from ::interesting_fields -> ::init_style
	* graph/gog-grid.c : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

2003-11-05  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.h : I don't want GtkWidget in these headers

2003-11-04  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125986
	* graph/gog-style.c (gog_style_merge) : A cheesy solution to the
	  current lack of clarity on the theming.  We only have a
	  colour.is_auto flag, so only assign the colour.  This means that
	  lines and outlines can only theme the colour, not the width or the
	  pattern.  Which seems reasonably until we have a plan for defining
	  'autoness' for those attributes.

2003-11-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=126056
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : differentiate
	  between missing and bad strings.  X axis strings are indicies, Y
	  axis strings are 0.

2003-11-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_editor) : Add a weakref so that we can
	  disconnect the signal if the object is destroyed.

	* graph/gog-axis.c (make_dim_editor) : Use closures to avoid having a
	  callback after a widget has been destroyed.

2003-11-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
  
  	http://bugzilla.gnome.org/show_bug.cgi?id=125419
	* graph/gog-renderer.[ch] (gog_renderer_start_clipping),
	(gog_renderer_stop_clipping) : new. Implement clipping of drawing.
  	Only one level of clipping is allowed. 
	* graph/gog-renderer[svg, pixbuf, gnome-print] 
	(gog_renderer_.._start_clipping),
	(gog_renderer_.._stop_clipping) : new.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path),
	(gog_renderer_pixbuf_draw_polygon),
	(gog_renderer_pixbuf_draw_text) : handle offset for drawing when
	clipping.
	* graph/gog-rendere-gnome-print.c (make_rectangle_path) : new;
	* graph/gog-chart.c (gog_chart_render) : new. Use the same clipping
 	region for all plots.
  	
2003-11-01 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c: added scale parameter to gog_graph_export_to_svg.
	* graph/gog-renderer-svg.c: implement gog_renderer_svg_measure_text and
	gog_renderer_svg_draw_text.

2003-11-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_plot_class_init) : set the default to match the real
	  default so that things persist properly.

2003-10-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_get_cardinality) : Set the index even if
	  the series is invald.  This makes like easier when adding a series.

	* graph/gog-style.c (gog_object_set_style) : block style change
	  signals.
	(gog_style_pref_state_free) : disconnect the style change handler.
	(gog_style_editor) : monitor style changed signals.
	(cb_style_changed) : new.

	* graph/gog-series.c (gog_series_set_index) : signal when the style
	  changes.

	* graph/gog-object.c (gog_object_get_editor) : force an update before
	  creating an editor to avoid flicker later.
	* graph/gog-graph.c (gog_graph_force_update) : new.

2003-10-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_axis_bound_changed) : update all the auto
	  bounds when anything changes.

2003-10-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : be lazy and
	  do the clipping in the renderer rather than here.  It will make
	  life easier when we add splines.

2003-10-27  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125619
	* graph/gog-axis.c (gog_axis_editor) : init the high/low button

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : clip
	  markers and lines.

	* graph/gog-renderer-pixbuf.c (clip_path) : new.
	(gog_renderer_pixbuf_draw_path) : support the new clipping argument.
	(gog_renderer_pixbuf_draw_polygon) : ditto.

2003-10-23  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125045
	* graph/gog-axis.c (gog_axis_view_render) : clip correctly and space
	  the ticks based on the actual tick values, not just their index.
	(gog_axis_num_markers) : return a step fraction too.

2003-10-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : init zoom to 1.
	* graph/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	  ditto.

2003-10-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (axis_get_entry) : Add a user_defined parameter in
	order to know if the returned value is defined by user or computed.
	(gog_axis_update) : Use user defined bound for the tick spacing
	calculation.
	(gog_axis_num_markers) : round to nearest value instead of the
	automatic double to int cast that removes the fractionnal part.
	
2003-10-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart-impl.h : Inherit from GogOutlinedObject and use the
	  padding there.
	* graph/gog-graph-impl.h : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

	* graph/gog-chart.c (gog_chart_get_property) : padding is in outlined
	  object now.
	(gog_chart_set_property) : delete.
	(gog_chart_class_init) : delete set_prop method and padding_pts prop
	(gog_chart_init) : delete padding_pts.
	(gog_chart_view_size_allocate) : use outlined view.
	(gog_chart_view_render) : ditto.
	(gog_chart_view_class_init) : just use render in outlined view.

	* graph/gog-graph.c (gog_graph_set_property) : remove PADDING
	(gog_graph_get_property) : ditto.
	(gog_graph_class_init) : ditto.
	(gog_graph_init) : we don't inherit directly from StyledObject anymore
	(gog_graph_view_size_allocate) : use OutlinedView.
	(gog_graph_view_render) : ditto.
	(gog_graph_view_class_init) : ditto.

	* graph/Makefile.am : Add gog-outlined-object.[ch]

2003-10-13  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=122546
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : Update
	  the index axis if our labels change.  This problem does not apply to
	  XY plots because their x bounds will change when a dim is set or
	  cleared.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* Release 1.2.1

2003-10-06 Jean Brefort <jean.brefort@ac-dijon.fr>
 
 	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_polygon) : use go_pattern_is_solid.
 	(gog_renderer_svg_draw_marker) : implemented.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : put y axis labels to the
	  left or right not at the top.
	(gog_axis_class_init) : enable y axis labels

2003-10-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_dataset_dims) : enable setting the cross
	  point.

2003-10-07  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_update): Fake floor, not fake trunc.

2003-10-06  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot.c (gog_plot_get_axis_bounds): Return NULL, not
	FALSE.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_point): Ditto.

2003-10-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.c (go_pattern_selector): gtk_combo_box renamed
	to gnm_combo_box.

	* utils/go-marker.c (go_marker_selector): Ditto.

	* utils/go-gradient.c (go_gradient_selector): Ditto.

	* graph/gog-style.c (create_color_combo): Ditto.

2003-10-05  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.c: #include gtkliststore.h to fix build.

2003-09-30  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : we
	  already winnowed out the invalid series, no need to flag them.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  ditto.

2003-09-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_is_marker_visible) : Use the
	  interesting field too.
	(gog_style_assign) : Assign the interesting flags too.

	* graph/gog-legend.c (cb_size_elements) : see if anything has a marker
	(gog_legend_view_size_request) : if any of the elements has a marker
	  rather than a swatch we need 3x swatch width.
	(cb_render_elements) : If entry has a marker draw the line and marker
	(gog_legend_view_render) : Prep for drawing markers if any exist.

2003-09-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	Survive getting a NULL vals, even though that might be a symptom
	of something else.

	* graph/gog-object.c (gog_object_dup): Plug leak.

	* graph/gog-object-xml.c (gog_object_new_from_xml): Plug leaks.

2003-09-23  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.h : delete unused enum GogAxisTickLevel.
	  Publicize the data elements.
	(gog_axis_update) : Manually handle the epsilon shifts so that we can
	  ignore sign.
 
2003-09-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (cb_remove_child) : doh!

2003-09-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : scale the font size
	  manually to work around.
	    http://bugzilla.gnome.org/show_bug.cgi?id=121543

2003-09-15 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c : added gradient support.

	* utils/go-gradient.c (go_gradient_setup): changed vector for oblique gradients.

2003-09-20  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  only valid series can contribute to an index dimension.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_axis_bounds) : ditto.

	* graph/gog-renderer-gnome-print.c (get_font) : respect zoom.

	* graph/gog-style.c (font_init) : set the font _before_ connecting the
	  signal. doh!

2003-09-16  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : change the default theme for
	Adrian.

2003-09-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout): Change to way font
	description is set so that it will work both before and after the
	fix to http://bugzilla.gnome.org/show_bug.cgi?id=121543.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : empty labels are
	  of size 0,0 not 1,1

	* graph/gog-view.c (gog_view_size_allocate_real) : don't pad if the
	  child is 0 sized.
	(gog_view_size_child_request) : ditto.

	* graph/gog-axis.c (gog_axis_num_markers) : we can't use the max_val
	  as a fallback if there is no data defining it.

2003-09-15  Morten Welinder  <terra@gnome.org>

	* utils/go-marker.c (go_marker_selector): Terminate the array as
	it is shorter than we tell the pixbuf combo.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* Release 1.2.0

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_measure_text) : pango does not
	  like measuring ""
	(gog_renderer_draw_text) : ditto.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : clipping the label text in
	  the iterating dimension is a bad idea, we want to clip whole labels,
	  not the individual lines.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : only draw
	  the first series for a pie.  Things can sneak in.

	* utils/go-font.c (go_font_init) : make default font smaller

	* graph/gog-object.c (gog_object_get_pos) : new.
	(gog_object_set_pos) : new.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : We ignore the bounds for a
	  discrete axis.
	(gog_axis_update) : store information pertaining to axes with discrete
	  enumerations.
	(gog_axis_editor) : discrete enumerations do not allow for manual boun
	  changes.
	(gog_axis_num_markers) : handle discrete enumerations.
	(gog_axis_get_marker) : ditto.
	(gog_axis_view_size_request) : ditto.
	(gog_axis_view_render) : rework to support in and out ticks.
	  Support discrete enumerations.
	(gog_axis_is_discrete) : new.
	(gog_axis_get_ticks) : new.

	* graph/gog-renderer.c (gog_renderer_draw_text) : revamp the interface
	  yet again to make parameters clearer.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : adjsut
	  to the new interface and imrpve clipping support.
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_text) :
	  adjust to the new interface, add support for anchors.

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* gog-style-prefs.glade: `colour' should be `color'

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-renderer-gnome-print.c: replace calls of
	  gnome_font_find_closest_from_weight_slant with
	  gnm_font_find_closest_from_weight_slant

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (axis_get_entry) : new utility.
	(gog_axis_get_bounds) : use it here.
	(gog_axis_num_markers) : here.
	(gog_axis_get_marker) : and here.
	(role_label_can_add) : new.
	(gog_axis_class_init) : use it here to disable labels on the Y axis
	  until we can get a smarter layout engine.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_update) : yet another layer of heuristic
	  to handle -1 .. 1 better.
	(gog_axis_get_marker) : force to 0.

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  Get the bounds from the value axis. (fixes bar plots)

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_enable_dim) : get smarter and handle
	  transitions to from auto state.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (cb_fg_color_changed, cb_bg_color_changed,
	cb_fill_gradient_start_color, cb_fill_gradient_end_color): Update
	is_auto and pattern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags.
	(gog_style_merge): Only merge color attributes for fill.
	(gog_style_init): Initialize attern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags

	* graph/gog-style.h: Add non-persistent auto flags for each color
	element in fill.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : be smarter about
	  positioning.

	* graph/gog-view.c (gog_view_size_child_request) : hard code some
	  inter-child padding.  We can be more elegant in the future.
	(gog_view_size_allocate_real) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : request space for
	  children too.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-legend.c (cb_render_elements): Allow for floating
	point inaccuracies when deciding if there is room for an element.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : support index
	  axis for X.
	(gog_xy_series_update) : ditto.

	* graph/gog-axis.c (gog_axis_editor) : we want font too.
	  Align the Auto header nicely.
	(make_dim_editor) : some initial work to give the Auto button's some
	  feedback.

	* graph/gog-style.c (cb_line_color_changed) : set auto_color.
	(cb_outline_color_changed) : ditto.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_axis_set_assign) : clear_parent clears
	  ::grid, store the pointer for a moment so that we can free it.

	* utils/go-color.c (color_combo_get_gocolor) : cheap hack to support
	  alpha channel despite interface limitations.  It only works for
	  custom colours, but thats the most important case.
	(color_combo_set_gocolor) : init the custom picker too to ensure that
	  alpha gets set correctly.

	* utils/go-gradient.c (go_gradient_selector) : no need to free images,
	  have the combo absorb them.
	* utils/go-pattern.c (go_pattern_selector) : ditto.
	  fix cut-n-paste-o the first
	  'Thin Diagonal Crosshatch' was actually
	  'Thin Diagonal Stripe'

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : leak.

2003-09-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_set_property) : fix typos.
	(gog_axis_view_render) : actually support some of the tick options.
	(gog_axis_editor) : hook up some of the controls.

	* graph/gog-chart.c (gog_chart_axis_set_assign) : add or remove a grid
	  depending on the axis set.

2003-09-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property) : don't bother
	  saving parameters with default values.

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) :
	  respect axis bounds.

	* graph/gog-axis.c (gog_axis_view_render) : invert alignment of text
	  and support tick marks.
	(gog_axis_view_size_request) : Make axis labels optional, and allocate
	  size for major and minor ticks.
	(gog_axis_class_init) : Lots of new options.
	(gog_axis_get_property) : ditto, not all of them are supported yet.
	(gog_axis_set_property) : ditto, not all of them are supported yet.
	(gog_axis_update) : Add pull to 0, and step doubling heuristics.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : Clip
	  text trying to draw out of the physical bounds.

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  fix cut-n-paste-o.

2003-09-10  Jody Goldberg <jody@gnome.org>

	* Release 1.1.90

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) : set
	  the interesting fields when all the parents are in place.

	* graph/gog-renderer.h : Add an anchor parm to draw_text and clean up
	  the semantics of size.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : handle
	  the various anchor types.

	* graph/gog-axis.c : Some initial work at generating bounds, and
	  drawing axis values.

	* graph/gog-view.c (gog_view_render) : filter objects with invalid
	  size.  eg a user makes the plot too small to be useful.

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) :
	  percentage charts logicly limit -1 .. 1

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_update) : no logical min
	  or max.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : fix icons to match
	  reality.  All lines currently have markers by default.

	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : Generate the correct bounds.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : Why special case 0..1
	(gog_barcol_view_render) : handle bound clipping.

2003-09-08  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_marker): New
	dummy implementation.
	(gog_renderer_svg_class_init): Use it.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_fill_gradient_end_color) : throw the update
	  into a timer to decrease flicker.
	  Works around a bug in older libarts.
	(gog_style_set_fill_brightness) : new.
	(cb_gradient_brightness_value_changed) : actually hide the brightness.
	(cb_gradient_style_changed) : ditto.
	(fill_gradient_init) : ditto.

	* graph/gog-renderer-svg.c (gog_graph_export_to_svg) : convert
	  interface to use libgsf.

2003-09-07 Jean Brefort <jean.brefort@ac-dijon.fr>

	* utils/go-gradient.c (go_gradient_setup): added a small value to gradient->c for
	  vertical gradients to avoid a line whith the bad color at the top of the area.
	* graph/gog-style.c: handle brightness in gradients.
	* graph/gog-renderer-svg.[c,h]: new files to handle svg export (not
	fully implemented).
	* graph/Makefile.am: added gog-renderer-svg.[c,h].

2003-09-07  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.c (go_marker_selector) : Add marker names.

2003-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.c : removed unused property and signal stuff.
	(go_marker_selector) : new.
	* graph/gog-style.c (populate_marker_combo) : new.
	(marker_init) : use the marker combo.
	* graph/gog-style-prefs.glade : removed marker option menu.
	* graph/gog-renderer-gnome-print.c 
	(gog_renderer_gnome_print_draw_marker): returns when one of the path
	is NULL (fix a crash).
	
2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : set the
	  interesting field for a style.
	(gog_styled_object_init) : ditto.
	(gog_styled_object_interesting_fields) : default to outline & fill.

	* graph/gog-style.c (gog_style_persist_dom_save) : only save
	  interesting fields.

	* graph/gog-series.c (gog_series_interesting_fields) : new.
	(gog_series_class_init) : hook it up.
	* graph/gog-legend.c (gog_legend_interesting_fields) : new.
	(gog_legend_class_init) : hook it up.
	* graph/gog-label.c (gog_label_interesting_fields) : new.
	(gog_label_class_init) : hook it up.
	* graph/gog-axis.c (gog_axis_interesting_fields) : new.
	(gog_axis_class_init) : hook it up.

2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_line_load) : support auto_color flags.
	(gog_style_line_save) : ditto.
	(gog_style_fill_load) : handle is_auto.
	(gog_style_fill_save) : ditto.

	* graph/gog-legend.c (gog_legend_view_render) : tune the padding.
	(cb_render_elements) : ditto.

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* graph/gog-theme.c (gog_theme_init_style): Merge styles instead
	of assigning style from theme.
	(map_area_series_solid_default): Only change elements which hold
	auto values.

	* utils/go-marker.[ch] (go_marker_shape_from_str,
	go_marker_shape_as_str): Move from gog-style.c and rename.
	(go_marker_is_auto): New. Tests if marker is different from
	default. Should really test if user has chosen the marker
	explicitly.

	* graph/gog-style.c (gog_style_merge): Implement.
	(str_as_marker_shape, marker_shape_as_str):Move to utils/go-marker
	and rename.
	(gog_style_marker_load, gog_style_marker_save): Use renamed
	version of above functions.
	(gog_style_persist_dom_load): Mark style elements read from file
	as non-auto (for now).

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.[ch] (go_pattern_as_str, go_pattern_as_str): Move
	from gog-style.c and rename.

	* utils/go-gradient.[ch] (go_gradient_dir_from_str) 
	(go_gradient_dir_as_str): Ditto.

	* graph/gog-style.c (str_as_pattern, pattern_as_str,
	str_as_grad_dir, grad_dir_as_str): Move to utils/go-pattern /
	go-gradient and rename.
	(gog_style_gradient_load, gog_style_gradient_save,
	gog_style_fill_load, gog_style_fill_save): Use renamed version of
	above functions.

2003-09-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-color.[ch] (go_color_from_str, go_color_as_str):
	New. Convert color to/from string.

	* graph/gog-style.c (str_as_fill_style, fill_style_as_str):
	New. Convert fill style to/from string.
	(str_as_pattern, pattern_as_str): New. Convert pattern to/from
	string.
	(str_as_grad_dir, grad_dir_as_str): New. Convert gradient
	direction to/from string.
	(str_as_marker_shape, marker_shape_as_str): New. Convert marker
	shape to/from string.
	(gog_style_line_load, gog_style_line_save): New. Load/save a
	line/outline style.
	(gog_style_gradient_load, gog_style_gradient_save): New. Load/save
	a gradient.
	(gog_style_fill_load, gog_style_fill_save): New. Load/save a fill.
	(gog_style_marker_load, gog_style_marker_save): New. Load/save a
	marker.
	(gog_style_font_load, gog_style_font_save): New. Load/save a font.
	(gog_style_persist_dom_load, gog_style_persist_dom_save):
	Implement.

	* graph/gog-object-xml.c (gog_object_set_arg_full) : Don't expect
	GObject type name as entity content.
	(gog_object_write_property): Don't save GObject type name as
	entity content.

2003-09-04  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : don't
	  force 0.  That will be handled at the axis level.

	* graph/gog-style.c : move the marker editor back into the main style
	  editor rather than being distinct.

2003-09-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.[ch] : new.
	* graph/gog-pixbuf-renderer.c : add draw_marker method.
	* graph/gog-gnome-print-renderer.c : idem.
	* graph/gog-renderer.c : idem.
	* graph/gog-style-prefs.glade : update marker editor
	* graph/gog-style.c (cb_marker_changed) : new.
	(marker_init) : use editor in gog-marker.c.
	(gog_style_pref_state_free) : free marker pointer.
	(gog_style_assign) : handle marker pointer.
	(gog_style_finalize) : idem.
	(gog_style_init) : init marker pointer.
	* graph/gog-theme.c (map_area_series_solid_default)
	(map_area_series_solid_guppi) : initialize marker properties.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_view_render) : draw markers.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : clip before things
	  overflow.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.h : add GogStyle::font::color
	* graph/gog-style.c (gog_style_init) : init font::color

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) :
	  composite manually cause libart was dog slow when using the approach
	  in librsvg.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : take outline
	  into account.

	* graph/gog-legend.c (gog_legend_view_render) : don't over draw space
	  allocated to children, and actually measure the text.
	(gog_legend_editor) : add.

	* graph/gog-view.c (gog_view_size_child_request) : new utility to
	  build up a size requestfor the children around the request for the
	  parent.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle case with no series.

2003-09-03  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_set_arg_full): Plug leak.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : kludge a patch for font
	  scaling.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : An initial skeleton, because I
	  accidentally deleted the last one.  Useless.

	* graph/gog-style.c (gog_object_get_style) : fix leak.
	(fill_init) : do not assign the style as part of the initialization.
 
	* graph/gog-renderer-pixbuf.c (make_layout) : another failing attempt
	  to get font sizes to change.

	* graph/gog-renderer-gnome-print.c : An initial pass at font support.
	  Untested, and unlikely to work out of the box.

2003-08-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_class_init): Plug leak.

	* utils/go-pattern.c (go_pattern_selector): Free the pixel data.

	* graph/gog-guru.c (graph_typeselect_minor): Handle ->plot
	changing underneath us.

	* utils/go-font.c (go_font_init): Since the key is a pango font
	description, not a go-font, use proper hash and equal functions.

2003-08-29  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : go
	  clockwise to avoid having ArtRender think the figure is inside out.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-impl.h : Add font_removed.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_class_init) : pie
	  series need outlines and fills.

	* graph/gog-theme.c (gog_theme_element_free) : new.
	(gog_theme_element_hash) : ditto.
	(gog_theme_element_eq) : ditto.
	(gog_themes_shutdown) : new to avoid leaking.
	(gog_theme_finalize) : handle lookup by role.
	(gog_theme_init) : ditto.
	(gog_theme_add_element) : ditto.
	(gog_theme_init_style) : rework to clarify precedence.
	    1) <parent_type>::<role>
	    2) ::<role>
	    3) object_type

	* graph/gog-style.c (gog_style_assign) : Use GOFont.
	(gog_style_finalize) : ditto.
	(gog_style_init) : ditto.
	(gog_style_set_font) : new,

	* goffice.c (libgoffice_init) : init fonts.
	(libgoffice_shutdown) : shutdown fonts and themes.

	* utils/go-font.c : new utility class to ref count fonts.

2003-08-28  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_selector): Clean a bit.

	* graph/gog-style.c (gog_style_pref_state_free): Don't unref NULL
	images.
	(gog_style_set_image_preview): Handle setting the same picture,
	just in case.

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): add 
	  argument to gnm_pixbuf_intelligent_scale call
	(cb_image_file_select) use preview_file_selection_set_filename
	  rather than gtk_file_selection_set_filename
	(fill_image_init): set minimum preview size

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): new
	(cb_image_file_select): use gtk_image_set_from_pixbuf
	(fill_image_init): initialize state->fill.image.image
	(cb_fill_type_changed): store original size image
	(gog_style_pref_state_free): free state->fill.image.image
	* graph/gog-style-prefs.glade: add size label to image-fill 
	  preview

2003-08-26  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use 
	  preview_file_selection_new and not
	  gnumeric_dialog_image_file_selection
	
2003-08-26  Morten Welinder  <terra@gnome.org>

	* utils/go-pattern.c (go_pattern_selector): Get the args to
	gdk_pixbuf_new right.  Plug leak.

	* utils/go-gradient.c (go_gradient_setup): New function.
	(go_gradient_selector): Use go_gradient_setup.  Make return type
	sane.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Use go_gradient_setup.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon): Use go_gradient_setup.

2003-08-25  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use
	  gnumeric_dialog_image_file_selection
	
2003-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : remove double
	  gonme_print_grestore

2003-08-24  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_graph_guru_clicked) :clear the tmp value that
	  was refing the graph.

2003-08-24  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c (gog_guru): store and ref gclosure
	(graph_guru_state_destroy): unref closure
	(cb_graph_guru_clicked): invoke gclosure
	* graph/gog-guru.h (gog_guru): use gclosure

2003-08-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : doh!

2003-08-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_role_cmp) : use the new priority field to
	  be smarter.
	(gog_object_dup) : Use the new go_data_dup.
	(gog_object_set_parent) : use gog_role_cmp instead of just using the
	  position.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (gog_guru) : use gog_graph_dup now that styles
	  work.

	* graph/gog-object.c (gog_object_dup) : doh! dst = src works better
	  than src = src.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.20

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_new_from_xml) : don't mark newly
	  reconstituted objects as explititly typed unless they really were.
	(gog_dataset_save) : patch leak.

	* graph/gog-object.c (gog_object_dup) : new.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis-prefs.glade : Remove the ticks menu.  I'll handle it
	  via roles later.

	* graph/gog-axis.c (gog_axis_editor) : we're only interested in the
	  line characteristics.

	* utils/go-units.h : fix arg names

	* graph/gog-chart.c (gog_chart_class_init) : add padding_pts.
	* graph/gog-graph.c (gog_graph_class_init) : typo.

2003-08-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_draw_rectangle) : handle outlines
	  properly.

2003-08-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets again

2003-08-14  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (cb_fill_type_changed): Don't unref the old
	image if it is NULL.

2003-08-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (role_plot_post_add) : don't set the axis twice
	  for the first plot.  Add a post condition to keep us honest.

2003-08-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (fill_image_init) : store the filename
	(cb_image_file_select) : ditto.
	(cb_fill_type_changed) : use it here to support restoring the image
	  filaname even though all we have is the image.

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets
	* graph/gog-guru.glade: increase default size and increase
	  default style portion

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: align fill-image widgets

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: improve spacing, add scoll window

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: add some missed label names

2003-08-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : re-enable image handling and cache the pixbuf.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : The
	  style stores the pixbuf now, no need to reload the damn thing from
	  disk every time we use it.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : Use a convenience routine
	(print_image) : new convenience routine.

2003-08-11  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.c (cb_center_size_changed):
	  scale between display and storage
	(gog_ring_plot_pref): ditto
	* graph/plugins/plot_pie/gog-ring-prefs.glade: center_size spin
	  button should range from 0 to 95 in steps of 5

2003-08-09  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c: add correct helpfile address

2003-08-01  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Plug
	leak.

	* graph/gog-style.c (gog_style_class_init): Plug leaks.

2003-08-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path) : use
	  the line characteristics, not outline.
	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_path) : ditto.

	* graph/gog-theme.c (gog_themes_init) : set the line width.
	(map_area_series_solid_default) : line colour seems to start at an
	  offset to area colours.
	(map_area_series_solid_guppi) : set the line colour too.

2003-07-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_set_index) : always init the style,
	  don't be cheap.  When loading index is initialized to 0, so the
	  first series would not get styled because it did not look like
	  anything changed.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : fix
	  interpretation of the center_size parameter.  Thanks tino.

	* graph/gog-plot.c (gog_plot_init) : copy the plot descriptor from the
	  class to the plot here for use cases that use g_object_new.
	* graph/gog-plot-engine.c (gog_plot_new_by_name) : rather than here
	  where it gets missed.

	* graph/gog-legend.c (gog_legend_parent_changed) : catch object name
	  changes in the chart and trigger an update.

	* graph/gog-graph.c (cb_graph_idle) : clear the handler before doing
	  the update so that a handler can queue an update for another object.

2003-07-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.[ch]: new. Line and Area support.
	* graph/plugins/plot_barcol/gog-1.d.[ch]: new. Defines base class for
	gog-line and gog-barcol.
	* graph/plugins/plot_barcol/plot-types.xml.in: add support for are and
	line plots.
	* graph/plugins/plot_barcol/plugin.xml.in: add are and line engines.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_get_axis) : new.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : for stacked and
	  percentage set the overlap to 100.

2003-07-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c : Request XY axis set.

	* graph/gog-data-set.c (gog_dataset_set_dim_internal) : always fire an
	  update.

2003-07-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.h : fix guards

2003-07-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (gog_legend_parent_changed) : chain upwards.
	* graph/gog-series.c (gog_series_parent_changed) : ditto.

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-ring-prefs.glade: colour -> color

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.glade: colour -> color

2003-07-03  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (init_solid_page, init_gradient_page) 
	(init_gradient_page, gog_style_editor): Turn off color combo
	tearoff behaviour in dialogs.

2003-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : tweak the default size to
	  produce a better proportion.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : some minor
	  cleanup.

	* graph/plugins/plot_pie/gog-pie-prefs.glade : fix units of separation
	  spinner.

2003-06-29  Jody Goldberg <jody@gnome.org>

	For Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/plugins/plot_pie/gog-pie.c : Handle rings

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_set_property) : don't allow setting
	  vary_style_by_element if the plot does not permit it in the current
	  state.
	(gog_plot_get_property) : be anal.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_supports_vary_style_by_element) : new.

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-impl.h : Add GogPlotClass::supports_vary_by_element

2003-06-26  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Fix gradients.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_type_service_finalize) : still
	  incomplete, but the lists definitely need to be freed.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-data-allocator.c (gog_dataset_get_type) : fix
	  cut-n-paste-o.

2003-06-25 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c: use alpha channel when
	  printing gradients

2003-06-20    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  unref the pixmaps

2003-06-22  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_set_property) : vary
	  style by element handled in plot now.
	(gog_pie_plot_get_property) : ditto.
	(gog_pie_plot_cardinality) : deleted.
	(gog_pie_plot_foreach_elem) : doh!  USe the label we just calculated.
	(gog_pie_view_render) : implement general extracted slices.

	* graph/gog-theme.c (gog_theme_get_name) : new util.

	* graph/gog-style.c : Implement the hooks for serialization but have
	  not actually written them yet.

	* graph/gog-series.c (gog_series_editor) : add a notebook wrapper to
	  allow changing style and data.
	(gog_series_init) : set GogObject::use_parent_as_proxy flag.
	(gog_series_dataset_dims) new.

	* graph/gog-plot.c (gog_plot_set_property) : handle the
	  'vary_style_by_element' at this level.
	(gog_plot_get_cardinality) : ditto.

	* graph/gog-object.c (gog_object_emit_changed) : Add
	  'use_parent_as_proxy' utility to make life easier for things like
	  series that will not have individual views.  This will fire a
	  changed signal from their plots.

	* graph/gog-legend.c (gog_legend_parent_changed) : new.  ensure we get
	  updated when chart cardinality changes.
	(gog_legend_update) : new.

	* graph/gog-label.c (gog_label_editor) : fix.
	(gog_label_class_init) : fix.
	(gog_label_dims) : added to handle the extension to dataset interface.

	* graph/gog-guru.glade : remove frame wrapping the prop notebook.

	* graph/gog-guru.c (prop_notebook_set_current_page) : new util.
	  to cleanup the handling of prop pages.  Only show the border if the
	  prop page is not a notebook.  This keeps the layout visually
	  similar in both cases.
	(cb_select_prop_page) : use it here.
	(cb_attr_tree_selection_change) : and here.
	(graph_guru_type_selector_new) : remove the useless notebook wrapping
	  the type selector.  It gives us more space and forces an initial
	  selection.

	* graph/gog-graph.c (gog_graph_set_property) : add a 'theme-name'
	  property to facilitate serialization.

	* graph/gog-data-allocator.c (gog_dataset_dims) : extension to the
	  dataset interface to facilitate serialization.

	* graph/gog-chart.c (gog_chart_get_property) : new.  Needed a way to
	  signal that the cardinality had changed, and a read only property
	  with a notify handler seemed cleaner than a stand alone signal.
	  Looking back at that decision, it seems ugly.  Might revisit this
	  later.

	* graph/gog-axis.c : hook up the dataset interface to prepare for
	 serializing all the flags.

	* graph/go-data-impl.h (GOData) : extend interface to require a
	  'from_str' operation to allow serialization to xml.
	* graph/go-data.c (go_data_from_str) : wrapper.

	* graph/Makefile.am : Add gog-object-xml.[ch]

2003-06-14    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor): move a bad placed g_signal_connect
	* graph/gog-style.c (gog_style_copy): duplicate filename if useful
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	  added missing white spaces (purely cosmetic)
	* graph/gog-renderer-pixbuf.c (go_color_to_artpix): removed static
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  added image and gradient support

2003-06-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (gog_style_editor) : Use the new 
	color_combo_set_instant_apply flag.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/goffice-graph.h : remove POSITION_FILL
	  It does no good to have random thought experiments floating around.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : add an accelerator
	  for the plot family selector.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_size_allocate) : Use the new debug macro.
	(cb_model_changed) : ditto.
	* graph/gog-object.c (gog_object_update) : and here.

	* graph/goffice-graph.h : Add trivial d() debugging macro so that
	  normal folk don't get deluged with debug spew.
	* graph/lib.c : store goffice_graph_debug_level here.

	* graph/gog-renderer-gnome-print.c * (gog_renderer_gnome_print_draw_text) :
	  implement trivial version.  Need to decide how to handle fonts.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_series_update) :
	  handle series before they are valid.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_series_update) : ditto.

	* graph/gog-object.c (gog_object_set_parent) : call the role's
	  post_add routine then objects parent_changed before signaling its
	  addition.
	(gog_object_add_by_role) : set_parent calls the role functions, not us.

2003-06-07    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor) :
	* graph/gog-style.h (struct _GogStyle) :
	* graph/gog-style-prefs.glade :
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : Start work on image

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.19

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.18

2003-06-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_queue_resize) : invalidate the allocation
	  too if there is no parent.

2003-06-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_set_position) : simplify.
	* graph/gog-graph.c (gog_graph_validate_chart_layout) : new.

	* graph/gog-guru.c (cb_sample_pressed) : set the zoom here.
	(cb_sample_released) : and unset it here so that the icons don't get
	  shrunk.

2003-06-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-style.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_generate_name) : return NULL, not FALSE

2003-06-03  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : quick and dirty draw the
	  text.  Still lots of work needed to measure things properly and do a
	  more dynamic layout.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : use the canvas zoom
	(cb_sample_plot_resize) : ditto.
	(graph_guru_init_format_page) : ditto.
	(graph_guru_type_selector_new) : ditto.

	* graph/gog-renderer-pixbuf.c (make_layout) : new.
	(gog_renderer_pixbuf_draw_text) : new. simple handler no rotation yet.
	(gog_renderer_pixbuf_measure_text) : new.
	(gog_art_renderer_new) : new utility.
	(gog_renderer_pixbuf_draw_polygon) : used here.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : another
	  speed up by using regions rather tha nthe bounding rect of the expose.
	  Thanks to AlexL for pointing out that this will help us when
	  multiple exposes are compressed into 1 event and we do better to
	  clip against the distinct sub regions, than the bounding box of all
	  of them.
	(gog_control_foocanvas_update) : make life easier and pass the zoom to
	  the renderer.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : minor warning suppression and format style
	  tidying.

2003-06-01  Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.h : new gradient styles,
		fill type accessible only if GOG_STYLE_FILL is used
	* graph/gog-style.c : Enhanced gradient selector
	* graph/gog-renderer-pixbuf.c : Support for new gradient types
	* graph/gog-themes.c : Top to bottom gradient in Guppi theme

2003-05-31  Jody Goldberg <jody@gnome.org>

	For Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.c (gog_style_editor) : Start work on gradient
	  selector.

2003-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) : fix
	  canvas warnings about tryingto queue an update from an update
	  handler.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : make default them fill legend
	  with white.

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : smooth
	  the anti-aliasing fuzziness in the libart backend for hairline
	  outlines.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support
	  positions of NE, NW, SE, SW so that we can handle XL's 'corner'
	  legends.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : big
	  speed win.  Only draw the piece of the chart that was exposed.

	* graph/gog-plot.c (gog_plot_request_cardinality_update) : we may add
	  a series before assigning to a chart.

	* graph/gog-theme.c (gog_themes_init) : default and guppi themes were
	  inverted for legends.

	* graph/gog-chart.c (gog_chart_class_init) : default to centering
	  legends.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_render) : re-enable.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) :
	  When the scale changes size requests are invalidated.

	* graph/gog-renderer.c (gog_renderer_invalidate_size_requests) : new.
	* graph/gog-view.c (gog_view_invalidate_sizes) : new.

	* graph/gog-legend.c (gog_legend_view_render) : typo.  pad is in Y
	  coordinates.

	* graph/gog-plot.c (role_series_post_add) : adding a series changes
	  the cardinality.
	(role_series_pre_remove) : ditto.
	(gog_plot_update) : delete.  Already handled at the chart level.
	(gog_plot_init) : Make sure cardinailty is initially valid so that we
	  queue an an update request as necessary when it really
	  does change.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support the
	  alignment flags and enforce clipping.
	(role_plot_post_add) : adding a plot changes the cardinality.
	(role_plot_pre_remove) : ditto.
	(gog_chart_init) : Make sure cardinailty is initially valid so that we
	  queue an an update request as necessary when it really
	  does change.

2003-05-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_outline_size) : keep widths >= 1

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : clip to
	  integer sizes to decrease amount of bleed through due to antialiasing.

2003-05-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c : make the swatch sizes properties.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : fix sizing.
	(cb_sample_plot_resize) : ditto.

	* graph/gog-renderer.c (gog_renderer_set_property) : doh!
	  set the values if they are _different_ not the same.

2003-05-26  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_set_page) : we can't run the
	  typeselector without a chart selected.
	(cb_graph_guru_add_plot) : the child_added handler already populates
	  things.
	(cb_find_child_added) : It may happen that something else will add an
	  item while we're editing, and the change of focus may not be
	  welcome,  However, it is far more likely that we just added it.

	* graph/gog-object.c (gog_object_is_deletable) : don't let the guru
	  delete the top level graph.

	* graph/gog-guru.glade : Add border to the menu bar to align it with
	  the scrolled window.
	Add a 'Precedence' menu.

2003-05-25  Jody Goldberg <jody@gnome.org>

	The code is in CVS time to start keeping a changelog.
