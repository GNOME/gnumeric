2003-11-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_editor) : Add a weakref so that we can
	  disconnect the signal if the object is destroyed.

	* graph/gog-axis.c (make_dim_editor) : Use closures to avoid having a
	  callback after a widget has been destroyed.

2003-11-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
  
  	http://bugzilla.gnome.org/show_bug.cgi?id=125419
	* graph/gog-renderer.[ch] (gog_renderer_start_clipping),
	(gog_renderer_stop_clipping) : new. Implement clipping of drawing.
  	Only one level of clipping is allowed. 
	* graph/gog-renderer[svg, pixbuf, gnome-print] 
	(gog_renderer_.._start_clipping),
	(gog_renderer_.._stop_clipping) : new.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path),
	(gog_renderer_pixbuf_draw_polygon),
	(gog_renderer_pixbuf_draw_text) : handle offset for drawing when
	clipping.
	* graph/gog-rendere-gnome-print.c (make_rectangle_path) : new;
	* graph/gog-chart.c (gog_chart_render) : new. Use the same clipping
 	region for all plots.
  	
2003-11-01 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c: added scale parameter to gog_graph_export_to_svg.
	* graph/gog-renderer-svg.c: implement gog_renderer_svg_measure_text and
	gog_renderer_svg_draw_text.

2003-11-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_plot_class_init) : set the default to match the real
	  default so that things persist properly.

2003-10-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_get_cardinality) : Set the index even if
	  the series is invald.  This makes like easier when adding a series.

	* graph/gog-style.c (gog_object_set_style) : block style change
	  signals.
	(gog_style_pref_state_free) : disconnect the style change handler.
	(gog_style_editor) : monitor style changed signals.
	(cb_style_changed) : new.

	* graph/gog-series.c (gog_series_set_index) : signal when the style
	  changes.

	* graph/gog-object.c (gog_object_get_editor) : force an update before
	  creating an editor to avoid flicker later.
	* graph/gog-graph.c (gog_graph_force_update) : new.

2003-10-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_axis_bound_changed) : update all the auto
	  bounds when anything changes.

2003-10-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : be lazy and
	  do the clipping in the renderer rather than here.  It will make
	  life easier when we add splines.

2003-10-27  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125619
	* graph/gog-axis.c (gog_axis_editor) : init the high/low button

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : clip
	  markers and lines.

	* graph/gog-renderer-pixbuf.c (clip_path) : new.
	(gog_renderer_pixbuf_draw_path) : support the new clipping argument.
	(gog_renderer_pixbuf_draw_polygon) : ditto.

2003-10-23  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125045
	* graph/gog-axis.c (gog_axis_view_render) : clip correctly and space
	  the ticks based on the actual tick values, not just their index.
	(gog_axis_num_markers) : return a step fraction too.

2003-10-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : init zoom to 1.
	* graph/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	  ditto.

2003-10-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (axis_get_entry) : Add a user_defined parameter in
	order to know if the returned value is defined by user or computed.
	(gog_axis_update) : Use user defined bound for the tick spacing
	calculation.
	(gog_axis_num_markers) : round to nearest value instead of the
	automatic double to int cast that removes the fractionnal part.
	
2003-10-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart-impl.h : Inherit from GogOutlinedObject and use the
	  padding there.
	* graph/gog-graph-impl.h : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

	* graph/gog-chart.c (gog_chart_get_property) : padding is in outlined
	  object now.
	(gog_chart_set_property) : delete.
	(gog_chart_class_init) : delete set_prop method and padding_pts prop
	(gog_chart_init) : delete padding_pts.
	(gog_chart_view_size_allocate) : use outlined view.
	(gog_chart_view_render) : ditto.
	(gog_chart_view_class_init) : just use render in outlined view.

	* graph/gog-graph.c (gog_graph_set_property) : remove PADDING
	(gog_graph_get_property) : ditto.
	(gog_graph_class_init) : ditto.
	(gog_graph_init) : we don't inherit directly from StyledObject anymore
	(gog_graph_view_size_allocate) : use OutlinedView.
	(gog_graph_view_render) : ditto.
	(gog_graph_view_class_init) : ditto.

	* graph/Makefile.am : Add gog-outlined-object.[ch]

2003-10-13  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=122546
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : Update
	  the index axis if our labels change.  This problem does not apply to
	  XY plots because their x bounds will change when a dim is set or
	  cleared.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* Release 1.2.1

2003-10-06 Jean Brefort <jean.brefort@ac-dijon.fr>
 
 	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_polygon) : use go_pattern_is_solid.
 	(gog_renderer_svg_draw_marker) : implemented.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : put y axis labels to the
	  left or right not at the top.
	(gog_axis_class_init) : enable y axis labels

2003-10-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_dataset_dims) : enable setting the cross
	  point.

2003-10-07  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_update): Fake floor, not fake trunc.

2003-10-06  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot.c (gog_plot_get_axis_bounds): Return NULL, not
	FALSE.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_point): Ditto.

2003-10-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.c (go_pattern_selector): gtk_combo_box renamed
	to gnm_combo_box.

	* utils/go-marker.c (go_marker_selector): Ditto.

	* utils/go-gradient.c (go_gradient_selector): Ditto.

	* graph/gog-style.c (create_color_combo): Ditto.

2003-10-05  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.c: #include gtkliststore.h to fix build.

2003-09-30  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : we
	  already winnowed out the invalid series, no need to flag them.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  ditto.

2003-09-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_is_marker_visible) : Use the
	  interesting field too.
	(gog_style_assign) : Assign the interesting flags too.

	* graph/gog-legend.c (cb_size_elements) : see if anything has a marker
	(gog_legend_view_size_request) : if any of the elements has a marker
	  rather than a swatch we need 3x swatch width.
	(cb_render_elements) : If entry has a marker draw the line and marker
	(gog_legend_view_render) : Prep for drawing markers if any exist.

2003-09-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	Survive getting a NULL vals, even though that might be a symptom
	of something else.

	* graph/gog-object.c (gog_object_dup): Plug leak.

	* graph/gog-object-xml.c (gog_object_new_from_xml): Plug leaks.

2003-09-23  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.h : delete unused enum GogAxisTickLevel.
	  Publicize the data elements.
	(gog_axis_update) : Manually handle the epsilon shifts so that we can
	  ignore sign.
 
2003-09-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (cb_remove_child) : doh!

2003-09-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : scale the font size
	  manually to work around.
	    http://bugzilla.gnome.org/show_bug.cgi?id=121543

2003-09-15 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c : added gradient support.

	* utils/go-gradient.c (go_gradient_setup): changed vector for oblique gradients.

2003-09-20  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  only valid series can contribute to an index dimension.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_axis_bounds) : ditto.

	* graph/gog-renderer-gnome-print.c (get_font) : respect zoom.

	* graph/gog-style.c (font_init) : set the font _before_ connecting the
	  signal. doh!

2003-09-16  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : change the default theme for
	Adrian.

2003-09-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout): Change to way font
	description is set so that it will work both before and after the
	fix to http://bugzilla.gnome.org/show_bug.cgi?id=121543.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : empty labels are
	  of size 0,0 not 1,1

	* graph/gog-view.c (gog_view_size_allocate_real) : don't pad if the
	  child is 0 sized.
	(gog_view_size_child_request) : ditto.

	* graph/gog-axis.c (gog_axis_num_markers) : we can't use the max_val
	  as a fallback if there is no data defining it.

2003-09-15  Morten Welinder  <terra@gnome.org>

	* utils/go-marker.c (go_marker_selector): Terminate the array as
	it is shorter than we tell the pixbuf combo.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* Release 1.2.0

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_measure_text) : pango does not
	  like measuring ""
	(gog_renderer_draw_text) : ditto.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : clipping the label text in
	  the iterating dimension is a bad idea, we want to clip whole labels,
	  not the individual lines.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : only draw
	  the first series for a pie.  Things can sneak in.

	* utils/go-font.c (go_font_init) : make default font smaller

	* graph/gog-object.c (gog_object_get_pos) : new.
	(gog_object_set_pos) : new.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : We ignore the bounds for a
	  discrete axis.
	(gog_axis_update) : store information pertaining to axes with discrete
	  enumerations.
	(gog_axis_editor) : discrete enumerations do not allow for manual boun
	  changes.
	(gog_axis_num_markers) : handle discrete enumerations.
	(gog_axis_get_marker) : ditto.
	(gog_axis_view_size_request) : ditto.
	(gog_axis_view_render) : rework to support in and out ticks.
	  Support discrete enumerations.
	(gog_axis_is_discrete) : new.
	(gog_axis_get_ticks) : new.

	* graph/gog-renderer.c (gog_renderer_draw_text) : revamp the interface
	  yet again to make parameters clearer.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : adjsut
	  to the new interface and imrpve clipping support.
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_text) :
	  adjust to the new interface, add support for anchors.

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* gog-style-prefs.glade: `colour' should be `color'

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-renderer-gnome-print.c: replace calls of
	  gnome_font_find_closest_from_weight_slant with
	  gnm_font_find_closest_from_weight_slant

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (axis_get_entry) : new utility.
	(gog_axis_get_bounds) : use it here.
	(gog_axis_num_markers) : here.
	(gog_axis_get_marker) : and here.
	(role_label_can_add) : new.
	(gog_axis_class_init) : use it here to disable labels on the Y axis
	  until we can get a smarter layout engine.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_update) : yet another layer of heuristic
	  to handle -1 .. 1 better.
	(gog_axis_get_marker) : force to 0.

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  Get the bounds from the value axis. (fixes bar plots)

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_enable_dim) : get smarter and handle
	  transitions to from auto state.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (cb_fg_color_changed, cb_bg_color_changed,
	cb_fill_gradient_start_color, cb_fill_gradient_end_color): Update
	is_auto and pattern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags.
	(gog_style_merge): Only merge color attributes for fill.
	(gog_style_init): Initialize attern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags

	* graph/gog-style.h: Add non-persistent auto flags for each color
	element in fill.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : be smarter about
	  positioning.

	* graph/gog-view.c (gog_view_size_child_request) : hard code some
	  inter-child padding.  We can be more elegant in the future.
	(gog_view_size_allocate_real) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : request space for
	  children too.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-legend.c (cb_render_elements): Allow for floating
	point inaccuracies when deciding if there is room for an element.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : support index
	  axis for X.
	(gog_xy_series_update) : ditto.

	* graph/gog-axis.c (gog_axis_editor) : we want font too.
	  Align the Auto header nicely.
	(make_dim_editor) : some initial work to give the Auto button's some
	  feedback.

	* graph/gog-style.c (cb_line_color_changed) : set auto_color.
	(cb_outline_color_changed) : ditto.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_axis_set_assign) : clear_parent clears
	  ::grid, store the pointer for a moment so that we can free it.

	* utils/go-color.c (color_combo_get_gocolor) : cheap hack to support
	  alpha channel despite interface limitations.  It only works for
	  custom colours, but thats the most important case.
	(color_combo_set_gocolor) : init the custom picker too to ensure that
	  alpha gets set correctly.

	* utils/go-gradient.c (go_gradient_selector) : no need to free images,
	  have the combo absorb them.
	* utils/go-pattern.c (go_pattern_selector) : ditto.
	  fix cut-n-paste-o the first
	  'Thin Diagonal Crosshatch' was actually
	  'Thin Diagonal Stripe'

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : leak.

2003-09-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_set_property) : fix typos.
	(gog_axis_view_render) : actually support some of the tick options.
	(gog_axis_editor) : hook up some of the controls.

	* graph/gog-chart.c (gog_chart_axis_set_assign) : add or remove a grid
	  depending on the axis set.

2003-09-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property) : don't bother
	  saving parameters with default values.

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) :
	  respect axis bounds.

	* graph/gog-axis.c (gog_axis_view_render) : invert alignment of text
	  and support tick marks.
	(gog_axis_view_size_request) : Make axis labels optional, and allocate
	  size for major and minor ticks.
	(gog_axis_class_init) : Lots of new options.
	(gog_axis_get_property) : ditto, not all of them are supported yet.
	(gog_axis_set_property) : ditto, not all of them are supported yet.
	(gog_axis_update) : Add pull to 0, and step doubling heuristics.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : Clip
	  text trying to draw out of the physical bounds.

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  fix cut-n-paste-o.

2003-09-10  Jody Goldberg <jody@gnome.org>

	* Release 1.1.90

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) : set
	  the interesting fields when all the parents are in place.

	* graph/gog-renderer.h : Add an anchor parm to draw_text and clean up
	  the semantics of size.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : handle
	  the various anchor types.

	* graph/gog-axis.c : Some initial work at generating bounds, and
	  drawing axis values.

	* graph/gog-view.c (gog_view_render) : filter objects with invalid
	  size.  eg a user makes the plot too small to be useful.

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) :
	  percentage charts logicly limit -1 .. 1

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_update) : no logical min
	  or max.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : fix icons to match
	  reality.  All lines currently have markers by default.

	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : Generate the correct bounds.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : Why special case 0..1
	(gog_barcol_view_render) : handle bound clipping.

2003-09-08  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_marker): New
	dummy implementation.
	(gog_renderer_svg_class_init): Use it.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_fill_gradient_end_color) : throw the update
	  into a timer to decrease flicker.
	  Works around a bug in older libarts.
	(gog_style_set_fill_brightness) : new.
	(cb_gradient_brightness_value_changed) : actually hide the brightness.
	(cb_gradient_style_changed) : ditto.
	(fill_gradient_init) : ditto.

	* graph/gog-renderer-svg.c (gog_graph_export_to_svg) : convert
	  interface to use libgsf.

2003-09-07 Jean Brefort <jean.brefort@ac-dijon.fr>

	* utils/go-gradient.c (go_gradient_setup): added a small value to gradient->c for
	  vertical gradients to avoid a line whith the bad color at the top of the area.
	* graph/gog-style.c: handle brightness in gradients.
	* graph/gog-renderer-svg.[c,h]: new files to handle svg export (not
	fully implemented).
	* graph/Makefile.am: added gog-renderer-svg.[c,h].

2003-09-07  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.c (go_marker_selector) : Add marker names.

2003-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.c : removed unused property and signal stuff.
	(go_marker_selector) : new.
	* graph/gog-style.c (populate_marker_combo) : new.
	(marker_init) : use the marker combo.
	* graph/gog-style-prefs.glade : removed marker option menu.
	* graph/gog-renderer-gnome-print.c 
	(gog_renderer_gnome_print_draw_marker): returns when one of the path
	is NULL (fix a crash).
	
2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : set the
	  interesting field for a style.
	(gog_styled_object_init) : ditto.
	(gog_styled_object_interesting_fields) : default to outline & fill.

	* graph/gog-style.c (gog_style_persist_dom_save) : only save
	  interesting fields.

	* graph/gog-series.c (gog_series_interesting_fields) : new.
	(gog_series_class_init) : hook it up.
	* graph/gog-legend.c (gog_legend_interesting_fields) : new.
	(gog_legend_class_init) : hook it up.
	* graph/gog-label.c (gog_label_interesting_fields) : new.
	(gog_label_class_init) : hook it up.
	* graph/gog-axis.c (gog_axis_interesting_fields) : new.
	(gog_axis_class_init) : hook it up.

2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_line_load) : support auto_color flags.
	(gog_style_line_save) : ditto.
	(gog_style_fill_load) : handle is_auto.
	(gog_style_fill_save) : ditto.

	* graph/gog-legend.c (gog_legend_view_render) : tune the padding.
	(cb_render_elements) : ditto.

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* graph/gog-theme.c (gog_theme_init_style): Merge styles instead
	of assigning style from theme.
	(map_area_series_solid_default): Only change elements which hold
	auto values.

	* utils/go-marker.[ch] (go_marker_shape_from_str,
	go_marker_shape_as_str): Move from gog-style.c and rename.
	(go_marker_is_auto): New. Tests if marker is different from
	default. Should really test if user has chosen the marker
	explicitly.

	* graph/gog-style.c (gog_style_merge): Implement.
	(str_as_marker_shape, marker_shape_as_str):Move to utils/go-marker
	and rename.
	(gog_style_marker_load, gog_style_marker_save): Use renamed
	version of above functions.
	(gog_style_persist_dom_load): Mark style elements read from file
	as non-auto (for now).

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.[ch] (go_pattern_as_str, go_pattern_as_str): Move
	from gog-style.c and rename.

	* utils/go-gradient.[ch] (go_gradient_dir_from_str) 
	(go_gradient_dir_as_str): Ditto.

	* graph/gog-style.c (str_as_pattern, pattern_as_str,
	str_as_grad_dir, grad_dir_as_str): Move to utils/go-pattern /
	go-gradient and rename.
	(gog_style_gradient_load, gog_style_gradient_save,
	gog_style_fill_load, gog_style_fill_save): Use renamed version of
	above functions.

2003-09-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-color.[ch] (go_color_from_str, go_color_as_str):
	New. Convert color to/from string.

	* graph/gog-style.c (str_as_fill_style, fill_style_as_str):
	New. Convert fill style to/from string.
	(str_as_pattern, pattern_as_str): New. Convert pattern to/from
	string.
	(str_as_grad_dir, grad_dir_as_str): New. Convert gradient
	direction to/from string.
	(str_as_marker_shape, marker_shape_as_str): New. Convert marker
	shape to/from string.
	(gog_style_line_load, gog_style_line_save): New. Load/save a
	line/outline style.
	(gog_style_gradient_load, gog_style_gradient_save): New. Load/save
	a gradient.
	(gog_style_fill_load, gog_style_fill_save): New. Load/save a fill.
	(gog_style_marker_load, gog_style_marker_save): New. Load/save a
	marker.
	(gog_style_font_load, gog_style_font_save): New. Load/save a font.
	(gog_style_persist_dom_load, gog_style_persist_dom_save):
	Implement.

	* graph/gog-object-xml.c (gog_object_set_arg_full) : Don't expect
	GObject type name as entity content.
	(gog_object_write_property): Don't save GObject type name as
	entity content.

2003-09-04  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : don't
	  force 0.  That will be handled at the axis level.

	* graph/gog-style.c : move the marker editor back into the main style
	  editor rather than being distinct.

2003-09-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.[ch] : new.
	* graph/gog-pixbuf-renderer.c : add draw_marker method.
	* graph/gog-gnome-print-renderer.c : idem.
	* graph/gog-renderer.c : idem.
	* graph/gog-style-prefs.glade : update marker editor
	* graph/gog-style.c (cb_marker_changed) : new.
	(marker_init) : use editor in gog-marker.c.
	(gog_style_pref_state_free) : free marker pointer.
	(gog_style_assign) : handle marker pointer.
	(gog_style_finalize) : idem.
	(gog_style_init) : init marker pointer.
	* graph/gog-theme.c (map_area_series_solid_default)
	(map_area_series_solid_guppi) : initialize marker properties.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_view_render) : draw markers.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : clip before things
	  overflow.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.h : add GogStyle::font::color
	* graph/gog-style.c (gog_style_init) : init font::color

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) :
	  composite manually cause libart was dog slow when using the approach
	  in librsvg.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : take outline
	  into account.

	* graph/gog-legend.c (gog_legend_view_render) : don't over draw space
	  allocated to children, and actually measure the text.
	(gog_legend_editor) : add.

	* graph/gog-view.c (gog_view_size_child_request) : new utility to
	  build up a size requestfor the children around the request for the
	  parent.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle case with no series.

2003-09-03  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_set_arg_full): Plug leak.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : kludge a patch for font
	  scaling.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : An initial skeleton, because I
	  accidentally deleted the last one.  Useless.

	* graph/gog-style.c (gog_object_get_style) : fix leak.
	(fill_init) : do not assign the style as part of the initialization.
 
	* graph/gog-renderer-pixbuf.c (make_layout) : another failing attempt
	  to get font sizes to change.

	* graph/gog-renderer-gnome-print.c : An initial pass at font support.
	  Untested, and unlikely to work out of the box.

2003-08-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_class_init): Plug leak.

	* utils/go-pattern.c (go_pattern_selector): Free the pixel data.

	* graph/gog-guru.c (graph_typeselect_minor): Handle ->plot
	changing underneath us.

	* utils/go-font.c (go_font_init): Since the key is a pango font
	description, not a go-font, use proper hash and equal functions.

2003-08-29  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : go
	  clockwise to avoid having ArtRender think the figure is inside out.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-impl.h : Add font_removed.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_class_init) : pie
	  series need outlines and fills.

	* graph/gog-theme.c (gog_theme_element_free) : new.
	(gog_theme_element_hash) : ditto.
	(gog_theme_element_eq) : ditto.
	(gog_themes_shutdown) : new to avoid leaking.
	(gog_theme_finalize) : handle lookup by role.
	(gog_theme_init) : ditto.
	(gog_theme_add_element) : ditto.
	(gog_theme_init_style) : rework to clarify precedence.
	    1) <parent_type>::<role>
	    2) ::<role>
	    3) object_type

	* graph/gog-style.c (gog_style_assign) : Use GOFont.
	(gog_style_finalize) : ditto.
	(gog_style_init) : ditto.
	(gog_style_set_font) : new,

	* goffice.c (libgoffice_init) : init fonts.
	(libgoffice_shutdown) : shutdown fonts and themes.

	* utils/go-font.c : new utility class to ref count fonts.

2003-08-28  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_selector): Clean a bit.

	* graph/gog-style.c (gog_style_pref_state_free): Don't unref NULL
	images.
	(gog_style_set_image_preview): Handle setting the same picture,
	just in case.

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): add 
	  argument to gnm_pixbuf_intelligent_scale call
	(cb_image_file_select) use preview_file_selection_set_filename
	  rather than gtk_file_selection_set_filename
	(fill_image_init): set minimum preview size

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): new
	(cb_image_file_select): use gtk_image_set_from_pixbuf
	(fill_image_init): initialize state->fill.image.image
	(cb_fill_type_changed): store original size image
	(gog_style_pref_state_free): free state->fill.image.image
	* graph/gog-style-prefs.glade: add size label to image-fill 
	  preview

2003-08-26  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use 
	  preview_file_selection_new and not
	  gnumeric_dialog_image_file_selection
	
2003-08-26  Morten Welinder  <terra@gnome.org>

	* utils/go-pattern.c (go_pattern_selector): Get the args to
	gdk_pixbuf_new right.  Plug leak.

	* utils/go-gradient.c (go_gradient_setup): New function.
	(go_gradient_selector): Use go_gradient_setup.  Make return type
	sane.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Use go_gradient_setup.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon): Use go_gradient_setup.

2003-08-25  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use
	  gnumeric_dialog_image_file_selection
	
2003-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : remove double
	  gonme_print_grestore

2003-08-24  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_graph_guru_clicked) :clear the tmp value that
	  was refing the graph.

2003-08-24  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c (gog_guru): store and ref gclosure
	(graph_guru_state_destroy): unref closure
	(cb_graph_guru_clicked): invoke gclosure
	* graph/gog-guru.h (gog_guru): use gclosure

2003-08-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : doh!

2003-08-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_role_cmp) : use the new priority field to
	  be smarter.
	(gog_object_dup) : Use the new go_data_dup.
	(gog_object_set_parent) : use gog_role_cmp instead of just using the
	  position.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (gog_guru) : use gog_graph_dup now that styles
	  work.

	* graph/gog-object.c (gog_object_dup) : doh! dst = src works better
	  than src = src.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.20

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_new_from_xml) : don't mark newly
	  reconstituted objects as explititly typed unless they really were.
	(gog_dataset_save) : patch leak.

	* graph/gog-object.c (gog_object_dup) : new.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis-prefs.glade : Remove the ticks menu.  I'll handle it
	  via roles later.

	* graph/gog-axis.c (gog_axis_editor) : we're only interested in the
	  line characteristics.

	* utils/go-units.h : fix arg names

	* graph/gog-chart.c (gog_chart_class_init) : add padding_pts.
	* graph/gog-graph.c (gog_graph_class_init) : typo.

2003-08-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_draw_rectangle) : handle outlines
	  properly.

2003-08-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets again

2003-08-14  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (cb_fill_type_changed): Don't unref the old
	image if it is NULL.

2003-08-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (role_plot_post_add) : don't set the axis twice
	  for the first plot.  Add a post condition to keep us honest.

2003-08-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (fill_image_init) : store the filename
	(cb_image_file_select) : ditto.
	(cb_fill_type_changed) : use it here to support restoring the image
	  filaname even though all we have is the image.

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets
	* graph/gog-guru.glade: increase default size and increase
	  default style portion

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: align fill-image widgets

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: improve spacing, add scoll window

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: add some missed label names

2003-08-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : re-enable image handling and cache the pixbuf.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : The
	  style stores the pixbuf now, no need to reload the damn thing from
	  disk every time we use it.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : Use a convenience routine
	(print_image) : new convenience routine.

2003-08-11  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.c (cb_center_size_changed):
	  scale between display and storage
	(gog_ring_plot_pref): ditto
	* graph/plugins/plot_pie/gog-ring-prefs.glade: center_size spin
	  button should range from 0 to 95 in steps of 5

2003-08-09  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c: add correct helpfile address

2003-08-01  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Plug
	leak.

	* graph/gog-style.c (gog_style_class_init): Plug leaks.

2003-08-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path) : use
	  the line characteristics, not outline.
	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_path) : ditto.

	* graph/gog-theme.c (gog_themes_init) : set the line width.
	(map_area_series_solid_default) : line colour seems to start at an
	  offset to area colours.
	(map_area_series_solid_guppi) : set the line colour too.

2003-07-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_set_index) : always init the style,
	  don't be cheap.  When loading index is initialized to 0, so the
	  first series would not get styled because it did not look like
	  anything changed.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : fix
	  interpretation of the center_size parameter.  Thanks tino.

	* graph/gog-plot.c (gog_plot_init) : copy the plot descriptor from the
	  class to the plot here for use cases that use g_object_new.
	* graph/gog-plot-engine.c (gog_plot_new_by_name) : rather than here
	  where it gets missed.

	* graph/gog-legend.c (gog_legend_parent_changed) : catch object name
	  changes in the chart and trigger an update.

	* graph/gog-graph.c (cb_graph_idle) : clear the handler before doing
	  the update so that a handler can queue an update for another object.

2003-07-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.[ch]: new. Line and Area support.
	* graph/plugins/plot_barcol/gog-1.d.[ch]: new. Defines base class for
	gog-line and gog-barcol.
	* graph/plugins/plot_barcol/plot-types.xml.in: add support for are and
	line plots.
	* graph/plugins/plot_barcol/plugin.xml.in: add are and line engines.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_get_axis) : new.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : for stacked and
	  percentage set the overlap to 100.

2003-07-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c : Request XY axis set.

	* graph/gog-data-set.c (gog_dataset_set_dim_internal) : always fire an
	  update.

2003-07-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.h : fix guards

2003-07-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (gog_legend_parent_changed) : chain upwards.
	* graph/gog-series.c (gog_series_parent_changed) : ditto.

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-ring-prefs.glade: colour -> color

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.glade: colour -> color

2003-07-03  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (init_solid_page, init_gradient_page) 
	(init_gradient_page, gog_style_editor): Turn off color combo
	tearoff behaviour in dialogs.

2003-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : tweak the default size to
	  produce a better proportion.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : some minor
	  cleanup.

	* graph/plugins/plot_pie/gog-pie-prefs.glade : fix units of separation
	  spinner.

2003-06-29  Jody Goldberg <jody@gnome.org>

	For Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/plugins/plot_pie/gog-pie.c : Handle rings

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_set_property) : don't allow setting
	  vary_style_by_element if the plot does not permit it in the current
	  state.
	(gog_plot_get_property) : be anal.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_supports_vary_style_by_element) : new.

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-impl.h : Add GogPlotClass::supports_vary_by_element

2003-06-26  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Fix gradients.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_type_service_finalize) : still
	  incomplete, but the lists definitely need to be freed.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-data-allocator.c (gog_dataset_get_type) : fix
	  cut-n-paste-o.

2003-06-25 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c: use alpha channel when
	  printing gradients

2003-06-20    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  unref the pixmaps

2003-06-22  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_set_property) : vary
	  style by element handled in plot now.
	(gog_pie_plot_get_property) : ditto.
	(gog_pie_plot_cardinality) : deleted.
	(gog_pie_plot_foreach_elem) : doh!  USe the label we just calculated.
	(gog_pie_view_render) : implement general extracted slices.

	* graph/gog-theme.c (gog_theme_get_name) : new util.

	* graph/gog-style.c : Implement the hooks for serialization but have
	  not actually written them yet.

	* graph/gog-series.c (gog_series_editor) : add a notebook wrapper to
	  allow changing style and data.
	(gog_series_init) : set GogObject::use_parent_as_proxy flag.
	(gog_series_dataset_dims) new.

	* graph/gog-plot.c (gog_plot_set_property) : handle the
	  'vary_style_by_element' at this level.
	(gog_plot_get_cardinality) : ditto.

	* graph/gog-object.c (gog_object_emit_changed) : Add
	  'use_parent_as_proxy' utility to make life easier for things like
	  series that will not have individual views.  This will fire a
	  changed signal from their plots.

	* graph/gog-legend.c (gog_legend_parent_changed) : new.  ensure we get
	  updated when chart cardinality changes.
	(gog_legend_update) : new.

	* graph/gog-label.c (gog_label_editor) : fix.
	(gog_label_class_init) : fix.
	(gog_label_dims) : added to handle the extension to dataset interface.

	* graph/gog-guru.glade : remove frame wrapping the prop notebook.

	* graph/gog-guru.c (prop_notebook_set_current_page) : new util.
	  to cleanup the handling of prop pages.  Only show the border if the
	  prop page is not a notebook.  This keeps the layout visually
	  similar in both cases.
	(cb_select_prop_page) : use it here.
	(cb_attr_tree_selection_change) : and here.
	(graph_guru_type_selector_new) : remove the useless notebook wrapping
	  the type selector.  It gives us more space and forces an initial
	  selection.

	* graph/gog-graph.c (gog_graph_set_property) : add a 'theme-name'
	  property to facilitate serialization.

	* graph/gog-data-allocator.c (gog_dataset_dims) : extension to the
	  dataset interface to facilitate serialization.

	* graph/gog-chart.c (gog_chart_get_property) : new.  Needed a way to
	  signal that the cardinality had changed, and a read only property
	  with a notify handler seemed cleaner than a stand alone signal.
	  Looking back at that decision, it seems ugly.  Might revisit this
	  later.

	* graph/gog-axis.c : hook up the dataset interface to prepare for
	 serializing all the flags.

	* graph/go-data-impl.h (GOData) : extend interface to require a
	  'from_str' operation to allow serialization to xml.
	* graph/go-data.c (go_data_from_str) : wrapper.

	* graph/Makefile.am : Add gog-object-xml.[ch]

2003-06-14    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor): move a bad placed g_signal_connect
	* graph/gog-style.c (gog_style_copy): duplicate filename if useful
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	  added missing white spaces (purely cosmetic)
	* graph/gog-renderer-pixbuf.c (go_color_to_artpix): removed static
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  added image and gradient support

2003-06-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (gog_style_editor) : Use the new 
	color_combo_set_instant_apply flag.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/goffice-graph.h : remove POSITION_FILL
	  It does no good to have random thought experiments floating around.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : add an accelerator
	  for the plot family selector.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_size_allocate) : Use the new debug macro.
	(cb_model_changed) : ditto.
	* graph/gog-object.c (gog_object_update) : and here.

	* graph/goffice-graph.h : Add trivial d() debugging macro so that
	  normal folk don't get deluged with debug spew.
	* graph/lib.c : store goffice_graph_debug_level here.

	* graph/gog-renderer-gnome-print.c * (gog_renderer_gnome_print_draw_text) :
	  implement trivial version.  Need to decide how to handle fonts.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_series_update) :
	  handle series before they are valid.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_series_update) : ditto.

	* graph/gog-object.c (gog_object_set_parent) : call the role's
	  post_add routine then objects parent_changed before signaling its
	  addition.
	(gog_object_add_by_role) : set_parent calls the role functions, not us.

2003-06-07    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor) :
	* graph/gog-style.h (struct _GogStyle) :
	* graph/gog-style-prefs.glade :
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : Start work on image

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.19

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.18

2003-06-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_queue_resize) : invalidate the allocation
	  too if there is no parent.

2003-06-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_set_position) : simplify.
	* graph/gog-graph.c (gog_graph_validate_chart_layout) : new.

	* graph/gog-guru.c (cb_sample_pressed) : set the zoom here.
	(cb_sample_released) : and unset it here so that the icons don't get
	  shrunk.

2003-06-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-style.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_generate_name) : return NULL, not FALSE

2003-06-03  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : quick and dirty draw the
	  text.  Still lots of work needed to measure things properly and do a
	  more dynamic layout.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : use the canvas zoom
	(cb_sample_plot_resize) : ditto.
	(graph_guru_init_format_page) : ditto.
	(graph_guru_type_selector_new) : ditto.

	* graph/gog-renderer-pixbuf.c (make_layout) : new.
	(gog_renderer_pixbuf_draw_text) : new. simple handler no rotation yet.
	(gog_renderer_pixbuf_measure_text) : new.
	(gog_art_renderer_new) : new utility.
	(gog_renderer_pixbuf_draw_polygon) : used here.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : another
	  speed up by using regions rather tha nthe bounding rect of the expose.
	  Thanks to AlexL for pointing out that this will help us when
	  multiple exposes are compressed into 1 event and we do better to
	  clip against the distinct sub regions, than the bounding box of all
	  of them.
	(gog_control_foocanvas_update) : make life easier and pass the zoom to
	  the renderer.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : minor warning suppression and format style
	  tidying.

2003-06-01  Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.h : new gradient styles,
		fill type accessible only if GOG_STYLE_FILL is used
	* graph/gog-style.c : Enhanced gradient selector
	* graph/gog-renderer-pixbuf.c : Support for new gradient types
	* graph/gog-themes.c : Top to bottom gradient in Guppi theme

2003-05-31  Jody Goldberg <jody@gnome.org>

	For Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.c (gog_style_editor) : Start work on gradient
	  selector.

2003-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) : fix
	  canvas warnings about tryingto queue an update from an update
	  handler.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : make default them fill legend
	  with white.

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : smooth
	  the anti-aliasing fuzziness in the libart backend for hairline
	  outlines.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support
	  positions of NE, NW, SE, SW so that we can handle XL's 'corner'
	  legends.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : big
	  speed win.  Only draw the piece of the chart that was exposed.

	* graph/gog-plot.c (gog_plot_request_cardinality_update) : we may add
	  a series before assigning to a chart.

	* graph/gog-theme.c (gog_themes_init) : default and guppi themes were
	  inverted for legends.

	* graph/gog-chart.c (gog_chart_class_init) : default to centering
	  legends.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_render) : re-enable.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) :
	  When the scale changes size requests are invalidated.

	* graph/gog-renderer.c (gog_renderer_invalidate_size_requests) : new.
	* graph/gog-view.c (gog_view_invalidate_sizes) : new.

	* graph/gog-legend.c (gog_legend_view_render) : typo.  pad is in Y
	  coordinates.

	* graph/gog-plot.c (role_series_post_add) : adding a series changes
	  the cardinality.
	(role_series_pre_remove) : ditto.
	(gog_plot_update) : delete.  Already handled at the chart level.
	(gog_plot_init) : Make sure cardinailty is initially valid so that we
	  queue an an update request as necessary when it really
	  does change.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support the
	  alignment flags and enforce clipping.
	(role_plot_post_add) : adding a plot changes the cardinality.
	(role_plot_pre_remove) : ditto.
	(gog_chart_init) : Make sure cardinailty is initially valid so that we
	  queue an an update request as necessary when it really
	  does change.

2003-05-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_outline_size) : keep widths >= 1

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : clip to
	  integer sizes to decrease amount of bleed through due to antialiasing.

2003-05-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c : make the swatch sizes properties.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : fix sizing.
	(cb_sample_plot_resize) : ditto.

	* graph/gog-renderer.c (gog_renderer_set_property) : doh!
	  set the values if they are _different_ not the same.

2003-05-26  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_set_page) : we can't run the
	  typeselector without a chart selected.
	(cb_graph_guru_add_plot) : the child_added handler already populates
	  things.
	(cb_find_child_added) : It may happen that something else will add an
	  item while we're editing, and the change of focus may not be
	  welcome,  However, it is far more likely that we just added it.

	* graph/gog-object.c (gog_object_is_deletable) : don't let the guru
	  delete the top level graph.

	* graph/gog-guru.glade : Add border to the menu bar to align it with
	  the scrolled window.
	Add a 'Precedence' menu.

2003-05-25  Jody Goldberg <jody@gnome.org>

	The code is in CVS time to start keeping a changelog.
