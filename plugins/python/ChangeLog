2002-08-12  Jody Goldberg <jody@gnome.org>

	* Release 1.1.7

2002-08-07  Zbigniew Chyla  <cyba@gnome.pl>

	* Makefile.am (INCLUDES): Define PLUGIN_ID

	* python.c (plugin_init_general):
	Use the PLUGIN macro from module-plugin-defs.h

2002-08-04  Zbigniew Chyla  <cyba@gnome.pl>

	* python.c 
	(function_ref_notify): New
	(register_function): Pass function_ref_notify as the last arg to
	function_add_args/function_add_nodes.
	(plugin_init_general): Removed temporary hack.
	(plugin_can_deactivate_general): Removed (commented out) function.

2002-07-22  Zbigniew Chyla  <cyba@gnome.pl>

	* plugin.xml.in: Set loader type to "Gnumeric_Builtin:module".

	* python.c (plugin_can_deactivate_general): Commented out.
	(plugin_init_general): Use gnm_plugin_use_ref to prevent plugin from
	being deactivated.

2002-07-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.6

2002-07-20  Jon K Hellan  <hellan@acm.org>

	* python.c (BROKEN_PY_INITIALIZE): Test for this condition is now
	autoconfiscated.
	struct FuncData: Include category.
	(register_function): Save category.
	(plugin_can_deactivate_general): Able to deactivate unless a
	function is in use.
	(plugin_cleanup_general): Do cleanup.

2002-05-29  Jody Goldberg <jody@gnome.org>

	* Release 1.1.4

2002-04-29  Jody Goldberg <jody@gnome.org>

	* Release 1.1.3

2002-03-25  Jody Goldberg <jody@gnome.org>

	* Release 1.1.2

2002-03-22  Jon K Hellan  <hellan@acm.org>

	* python.c: Include expr-impl.h

2002-03-11  Jon K Hellan  <hellan@acm.org>

	* python.c (cell_ref_to_python, range_to_python,
	boolean_to_python, boolean_check, boolean_from_python,
	range_check, cell_ref_from_python, range_from_python, apply,
	register_function, initgnumeric, plugin_init_general): Python API
	doesn't expect arguments to be declared const. So cast constants
	to non-const to silence warning.

2002-03-10  Jody Goldberg <jody@gnome.org>

	* Release 1.1.1

2002-03-07  Jon K Hellan  <hellan@acm.org>

	* python.c (call_function, marshal_func_args, marshal_func_nodes):
	Substitute ei->func_call->func for ei->func_def and adapt pointer
	checks accordingly.

2002-02-18  Jody Goldberg <jody@gnome.org>

	* Release 1.1.0

2002-01-21  Jody Goldberg <jody@gnome.org>

	* Release 1.0.3

2002-01-15  Jody Goldberg <jody@gnome.org>

	* Release 1.0.2

2002-01-06  Jody Goldberg <jody@gnome.org>

	* Release 1.0.1

2001-12-31  Jody Goldberg <jody@gnome.org>

	* Release 1.0.0

2001-12-24  Jody Goldberg <jody@gnome.org>

	* Release 0.99.1

2001-12-15  Jody Goldberg <jody@gnome.org>

	* Release 0.99.0

2001-12-12  Jody Goldberg <jody@gnome.org>

	* python.c (marshal_func_nodes) : Use ExprList.

2001-11-05  Jody Goldberg <jgoldberg@home,com>

	* Release 0.75

2001-10-29  Jody Goldberg <jgoldberg@home.com>

	* Release 0.74

2001-10-29  Jody Goldberg <jgoldberg@home.com>

	* Release 0.73

2001-10-23  Jody Goldberg <jgoldberg@home.com>

	* python.c (marshal_func_nodes) : s/eval_expr/expr_eval/

2001-10-18  Jody Goldberg <jgoldberg@home.com>

	* Release 0.72

2001-10-15  Morten Welinder  <terra@diku.dk>

	* python.c (plugin_init_general): Plug file leak.

2001-10-07  Jody Goldberg <jgoldberg@home.com>

	* Release 0.71

2001-09-25  Jon K Hellan  <hellan@acm.org>

	* .cvsignore: Add plugin.xml

2001-08-28  Morten Welinder  <terra@diku.dk>

	* python.c (plugin_init_general): Avoid segfaults with buggy pythons.

2001-08-21  Zbigniew Chyla  <cyba@gnome.pl>

	* plugin.xml: Removed

	* plugin.xml.in: Copied from plugin.xml, prepared for localization.

	* Makefile.am: Use xml-i18n-tools to create plugin.xml (with
	translations merged from .po file).

2001-08-20  Jody Goldberg <jgoldberg@home.com>

	* Release 0.70

2001-08-11  Jody Goldberg <jgoldberg@home.com>

	* Release 0.69

2001-07-17  Jody Goldberg <jgoldberg@home.com>

	* Release 0.68

2001-06-28  Jody Goldberg <jgoldberg@home>

	* Release 0.67

2001-06-27  Jody Goldberg <jgoldberg@home.com>

	* Release 0.66

2001-05-20  Jody Goldberg <jgoldberg@home.com>

	* Release 0.65

2001-05-08  Jody Goldberg <jgoldberg@home.com>

	* python.c (string_from_exception) : suppress warning.

2001-03-17  Jody Goldberg <jgoldberg@home.com>

	* Release 0.64

2001-02-23  Jody Goldberg <jgoldberg@home.com>

	* Release 0.63

2001-02-16  Jody Goldberg <jgoldberg@home.com>

	* Release 0.62

2001-02-13  Jody Goldberg <jgoldberg@home.com>

	* Makefile.am : Fix target name.

2001-02-12  Karl Eichwalder  <ke@suse.de>

	* Makefile.am (EXTRA_DIST): Add $(gnumeric_plugin_python_DATA).
	(gnumeric_plugin_pythondir): New variable.
	(gnumeric_plugin_python_DATA): Ditto; add plugin.xml.

2000-12-17 Jody Goldberg <jgoldberg@home.com>

	* Release 0.61

2000-12-7  Jody Goldberg <jgoldberg@home.com>

        * Release 0.60

2000-11-18  Jody Goldberg <jgoldberg@home.com>

	* Release 0.59

2000-11-13  Jody Goldberg <jgoldberg@home.com>

        * Release 0.58

2000-10-30  Jody Goldberg <jgoldberg@home.com>

	* python.c : Adjust to changes in CommandContext.

2000-10-10  Jody Goldberg <jgoldberg@home.com>

        * Release 0.57

2000-06-28  Jody Goldberg <jgoldberg@home.com>

	* python.c : Remove symbol.h include.

2000-06-18  Jody Goldberg <jgoldberg@home.com>

        * Release 0.56

2000-06-18  Jody Goldberg <jgoldberg@home.com>

        * Release 0.55

2000-05-26  Jody Goldberg <jgoldberg@home.com>

	* python.c (init_plugin) : rename
	gnumeric_error_plugin_problem -> gnumeric_error_plugin

2000-05-20  Jody Goldberg <jgoldberg@home.com>

        * Release 0.54

2000-05-09  Jody Goldberg <jgoldberg@home.com>

	* Release 0.53

2000-05-07  Jon K Hellan  <hellan@acm.org>

        * Makefile.am: Include gnumeric-defs.py.

2000-04-26  Jody Goldberg <jgoldberg@home.com>

	* python.c (init_plugin) : Use gnumeric_sys_data_dir.

2000-04-06  Jody Goldberg <jgoldberg@home.com>

	* python.c (range_from_python) : Take an EvalPos for use in
	  value_new_cellrange.
	(row_from_python) : Take an evalpos for use in value_from_python.
	(array_from_python) : Take an evalpos for use in row_from_python.
	(value_from_python) : Take an evalpos for use in range_from_python.
	(call_function) : Adjust to changes in value_new_cellrange.

2000-04-05  Jody Goldberg <jgoldberg@home.com>

	* python.c (marshal_func_nodes) : Use eval_expr_nonempty, but permit
	  non-scalars.

2000-03-24  Jon K Hellan  <hellan@acm.org>

	* python.c (apply): Fix leak.

2000-03-03  Jon K Hellan  <hellan@acm.org>

	* python.c 
	(value_to_python): Update comment.
	(boolean_to_python): Use class gnumeric_defs.Boolean - we can now
	recognize booleans and convert them back.
	(boolean_check): New function: Checks if object is instance of
	gnumeric_defs.Boolean.
	(boolean_from_python): New function: Convert back to VALUE_BOOLEAN.
	(range_from_python): Remove misleading comment.
	(value_from_python): Handle boolean.
	(call_function): Factored out of marshal_func.
	(marshal_func): Rename to marshal_func_args. Added sanity checks.
	(marshal_func_nodes): New function. Handles varargs.
	(register_function): Handle varargs.
	(apply): Fix refcounting bug.

	* gnumeric_defs.py (Boolean): New class. Implements boolean.

2000-03-02  Jon K Hellan  <hellan@acm.org>

	* python.c (apply): Plug "Value" leak. 
	(array_from_python): Fix silly mistake.
	(row_from_python): Rename "col" variable to "rowno"

2000-03-01  Jon K Hellan  <hellan@acm.org>

	* python.c (exception_to_string): Rename to string_from_exception.
	(value_from_exception): New function. Converts the current Python
	exception to a new VALUE_ERROR.
	(file static variable eval_pos): remove
	(value_to_python): Fix refcounting bug re Py_None.
	(value_from_python): Caller is now responsible for converting
	exception to VALUE_ERROR.
	(marshal_func): Handle optional arguments. Use
	value_from_exception. Do away with eval_pos kludge. Consequence:
	We must pass FunctionEvalInfo as an extra parameter to the python
	functions.
	(apply): Add context parameter.
	(register_function): Add category parameter to Python
	signature. Register function in given category.

	* gnumeric_startup.py: Add category argument to all
	register_function calls.
	(gnumeric_mid, py_abs): Add context parameter.

	* python.c 

2000-03-01  Jon K Hellan  <hellan@acm.org>

	* python.c (cell_ref_to_python, range_to_python,
	cell_ref_from_python): Simplify error handling.
	(boolean_to_python): Simplify
	(row_to_python): New function. Converts an array row to
	Python.
	(array_to_python): New function. Converts an array to Python.
	(value_to_python): Handle array.
	(range_check): Factored out of value_from_python.
	(range_from_python): Restructure to use value_new_cellrange
	(array_check): New function. Check if object is array. 
	(value_from_python): Restructure to use the value_new_xxx
	constructors.
	(apply): Release values when no longer needed.

2000-02-29  Jon K Hellan  <hellan@acm.org>

	* python.c: Great renaming:
	convert_py_exception_to_string -> exception_to_string
	convert_cell_ref_to_python     -> cell_ref_to_python
	convert_range_to_python        -> range_to_python
	convert_boolean_to_python      -> boolean_to_python
	convert_value_to_python        -> value_to_python
	convert_cell_ref_from_python   -> cell_ref_from_python
	convert_range_from_python      -> range_from_python
	convert_python_to_value        -> value_from_python
	gnumeric_apply                 -> apply
	gnumeric_register_function     -> register_function

2000-02-28  Jon K Hellan  <hellan@acm.org>

	* python.c: GnumericError: Define
	(convert_py_exception_to_string): Do not decorate the value string
	of GnumericError - it represents a VALUE_ERROR we have been returned.
	(gnumeric_apply): Raise GnumericError if function_call_with_values
	returned error.
	(initgnumeric): Add GnumericError exception class.

2000-02-26  Jon K Hellan  <hellan@acm.org>

	* python.c (convert_py_exception_to_string): Move to top.
	(convert_cell_ref_to_python): New function. Convert cell reference
	to Python.
	(convert_range_to_python): New function. Convert range to Python
	(convert_value_to_python): Handle cell range, empty value, boolean
	(convert_range_from_python): New function. Convert Python range to
	gnumeric value.
	(convert_cell_ref_from_python):  New function. Convert Python cell ref
	to gnumeric ditto.
	(convert_python_to_value): Simplify string handling. Handle cell
	range, empty. Return exceptions as VALUE_ERROR.
	(init_plugin): Add gnumeric python directory to
	sys.path, so that we can install modules there.

	* gnumeric_startup.py: Import gnumeric_defs
	(help_py_mid, help_py_abs): Fix typo.
	(run_user_init_file): Run user rc file in current global
	namespace. 

	* gnumeric_defs.py: New file.
	(CellRef): Class for cell references
	(CellRange): Class for cell ranges

2000-01-31  Jody Goldberg <jgoldberg@home.com>

	* python.c (gnumeric_apply) : Make the const warning quiet.

2000-01-14  Jon K Hellan  <hellan@acm.org>

	* python.c (convert_py_exception_to_string): New function.
	(marshal_func): Convert exception info to string which is
	displayed in sheet. Did not remove traceback to stderr.
	(gnumeric_apply): New function. Invoke a gnumeric function from
	python.
	(__register_function): Rename to gnumeric_register_function. No
	need for funny "__" in a static function.
	(gnumeric_register_function): Fix typo. Category should be
	"Python", not "Perl".
	(gnumeric_funcs): Register gnumeric_apply. Use METH_VARARGS
	constant instead of 1.
	(init_plugin): Convert exception info to string which is displayed
	in dialog box. Did not remove traceback to stderr.

	* gnumeric_startup.py (gnumeric_mid): Register as "py_mid" instead
	of "mid" - no longer overrides built-in version.
	(py_abs): New function. Example of invoking a gnumeric function
	from Python.
	(run_user_init_file): New function. Run user init file
	~/.gnumeric/rc.py if present.

2000-01-03  Jon K Hellan  <hellan@acm.org>

        * plugins/python/python.c (initgnumeric): No longer display
        Python initialization message.

